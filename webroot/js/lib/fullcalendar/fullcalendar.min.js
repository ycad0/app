/*!
 * FullCalendar v2.2.5
 * Docs & License: http://arshaw.com/fullcalendar/
 * (c) 2013 Adam Shaw
 */

(function(e){"function"==typeof define&&define.amd?define(["jquery","moment"],e):e(jQuery,moment)})(function(e,t){function n(e){r(wt,e)}function r(t){function n(n,s){e.isPlainObject(s)&&e.isPlainObject(t[n])&&!i(n)?t[n]=r({},t[n],s):void 0!==s&&(t[n]=s)}for(var s=1;arguments.length>s;s++)e.each(arguments[s],n);return t}function i(e){return/(Time|Duration)$/.test(e)}function s(e){var n=t.localeData||t.langData;return n.call(t,e)||n.call(t,"en")}function o(e,t){t.left&&e.css({"border-left-width":1,"margin-left":t.left-1}),t.right&&e.css({"border-right-width":1,"margin-right":t.right-1})}function u(e){e.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function a(){e("body").addClass("fc-not-allowed")}function f(){e("body").removeClass("fc-not-allowed")}function l(t,n,r){var i=Math.floor(n/t.length),s=Math.floor(n-i*(t.length-1)),o=[],u=[],a=[],f=0;c(t),t.each(function(n,r){var l=n===t.length-1?s:i,c=e(r).outerHeight(!0);l>c?(o.push(r),u.push(c),a.push(e(r).height())):f+=c}),r&&(n-=f,i=Math.floor(n/o.length),s=Math.floor(n-i*(o.length-1))),e(o).each(function(t,n){var r=t===o.length-1?s:i,f=u[t],l=a[t],c=r-(f-l);r>f&&e(n).height(c)})}function c(e){e.height("")}function h(t){var n=0;return t.find("> *").each(function(t,r){var i=e(r).outerWidth();i>n&&(n=i)}),n++,t.width(n),n}function p(e,t){return e.height(t).addClass("fc-scroller"),e[0].scrollHeight-1>e[0].clientHeight?!0:(d(e),!1)}function d(e){e.height("").removeClass("fc-scroller")}function v(t){var n=t.css("position"),r=t.parents().filter(function(){var t=e(this);return/(auto|scroll)/.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==n&&r.length?r:e(t[0].ownerDocument||document)}function m(e){var t=e.offset().left,n=t+e.width(),r=e.children(),i=r.offset().left,s=i+r.outerWidth();return{left:i-t,right:n-s}}function g(e){return 1==e.which&&!e.ctrlKey}function y(e,t){var n,r,i,s,o=e.start,u=e.end,a=t.start,f=t.end;return u>a&&f>o?(o>=a?(n=o.clone(),i=!0):(n=a.clone(),i=!1),f>=u?(r=u.clone(),s=!0):(r=f.clone(),s=!1),{start:n,end:r,isStart:i,isEnd:s}):void 0}function b(e,t){if(e=e||{},void 0!==e[t])return e[t];for(var n,r=t.split(/(?=[A-Z])/),i=r.length-1;i>=0;i--)if(n=e[r[i].toLowerCase()],void 0!==n)return n;return e["default"]}function w(e,n){return t.duration({days:e.clone().stripTime().diff(n.clone().stripTime(),"days"),ms:e.time()-n.time()})}function E(e,n){return t.duration({days:e.clone().stripTime().diff(n.clone().stripTime(),"days")})}function S(e,t){var n,r;for(n=0;_t.length>n&&(r=_t[n],!x(r,e,t));n++);return r}function x(e,n,r){var i;return i=null!=r?r.diff(n,e,!0):t.isDuration(n)?n.as(e):n.end.diff(n.start,e,!0),i>=1&&B(i)?i:!1}function T(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function N(e){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(e)}function C(e){var t=function(){};return t.prototype=e,new t}function k(e,t){for(var n in e)L(e,n)&&(t[n]=e[n])}function L(e,t){return Dt.call(e,t)}function A(t){return/undefined|null|boolean|number|string/.test(e.type(t))}function O(t,n,r){if(e.isFunction(t)&&(t=[t]),t){var i,s;for(i=0;t.length>i;i++)s=t[i].apply(n,r)||s;return s}}function M(){for(var e=0;arguments.length>e;e++)if(void 0!==arguments[e])return arguments[e]}function _(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function D(e){return e.replace(/&.*?;/g,"")}function P(e){return e.charAt(0).toUpperCase()+e.slice(1)}function H(e,t){return e-t}function B(e){return 0===e%1}function j(e,t){var n,r,i,s,o=function(){var u=+(new Date)-s;t>u&&u>0?n=setTimeout(o,t-u):(n=null,e.apply(i,r),n||(i=r=null))};return function(){i=this,r=arguments,s=+(new Date),n||(n=setTimeout(o,t))}}function F(n,r,i){var s,o,u,a,f=n[0],l=1==n.length&&"string"==typeof f;return t.isMoment(f)?(a=t.apply(null,n),q(f,a)):T(f)||void 0===f?a=t.apply(null,n):(s=!1,o=!1,l?Pt.test(f)?(f+="-01",n=[f],s=!0,o=!0):(u=Ht.exec(f))&&(s=!u[5],o=!0):e.isArray(f)&&(o=!0),a=r||s?t.utc.apply(t,n):t.apply(null,n),s?(a._ambigTime=!0,a._ambigZone=!0):i&&(o?a._ambigZone=!0:l&&a.zone(f))),a._fullCalendar=!0,a}function I(e,n){var r,i,s=!1,o=!1,u=e.length,a=[];for(r=0;u>r;r++)i=e[r],t.isMoment(i)||(i=xt.moment.parseZone(i)),s=s||i._ambigTime,o=o||i._ambigZone,a.push(i);for(r=0;u>r;r++)i=a[r],n||!s||i._ambigTime?o&&!i._ambigZone&&(a[r]=i.clone().stripZone()):a[r]=i.clone().stripTime();return a}function q(e,t){e._ambigTime?t._ambigTime=!0:t._ambigTime&&(t._ambigTime=!1),e._ambigZone?t._ambigZone=!0:t._ambigZone&&(t._ambigZone=!1)}function R(e,t){e.year(t[0]||0).month(t[1]||0).date(t[2]||0).hours(t[3]||0).minutes(t[4]||0).seconds(t[5]||0).milliseconds(t[6]||0)}function U(e,t){return jt.format.call(e,t)}function z(e,t){return W(e,K(t))}function W(e,t){var n,r="";for(n=0;t.length>n;n++)r+=X(e,t[n]);return r}function X(e,t){var n,r;return"string"==typeof t?t:(n=t.token)?Ft[n]?Ft[n](e):U(e,n):t.maybe&&(r=W(e,t.maybe),r.match(/[1-9]/))?r:""}function V(e,t,n,r,i){var s;return e=xt.moment.parseZone(e),t=xt.moment.parseZone(t),s=(e.localeData||e.lang).call(e),n=s.longDateFormat(n)||n,r=r||" - ",$(e,t,K(n),r,i)}function $(e,t,n,r,i){var s,o,u,a,f="",l="",c="",h="",p="";for(o=0;n.length>o&&(s=J(e,t,n[o]),s!==!1);o++)f+=s;for(u=n.length-1;u>o&&(s=J(e,t,n[u]),s!==!1);u--)l=s+l;for(a=o;u>=a;a++)c+=X(e,n[a]),h+=X(t,n[a]);return(c||h)&&(p=i?h+r+c:c+r+h),f+p+l}function J(e,t,n){var r,i;return"string"==typeof n?n:(r=n.token)&&(i=It[r.charAt(0)],i&&e.isSame(t,i))?U(e,r):!1}function K(e){return e in qt?qt[e]:qt[e]=Q(e)}function Q(e){for(var t,n=[],r=/\[([^\]]*)\]|\(([^\)]*)\)|(LT|(\w)\4*o?)|([^\w\[\(]+)/g;t=r.exec(e);)t[1]?n.push(t[1]):t[2]?n.push({maybe:Q(t[2])}):t[3]?n.push({token:t[3]}):t[5]&&n.push(t[5]);return n}function G(){}function Y(e,t){return e||t?e&&t?e.grid===t.grid&&e.row===t.row&&e.col===t.col:!1:!0}function Z(e){var t=tt(e);return"background"===t||"inverse-background"===t}function et(e){return"inverse-background"===tt(e)}function tt(e){return M((e.source||{}).rendering,e.rendering)}function nt(e){var t,n,r={};for(t=0;e.length>t;t++)n=e[t],(r[n._id]||(r[n._id]=[])).push(n);return r}function rt(e,t){return e.eventStartMS-t.eventStartMS}function it(e,t){return e.eventStartMS-t.eventStartMS||t.eventDurationMS-e.eventDurationMS||t.event.allDay-e.event.allDay||(e.event.title||"").localeCompare(t.event.title)}function st(n){var r,i,s,o,u=xt.dataAttrPrefix;return u&&(u+="-"),r=n.data(u+"event")||null,r&&(r="object"==typeof r?e.extend({},r):{},i=r.start,null==i&&(i=r.time),s=r.duration,o=r.stick,delete r.start,delete r.time,delete r.duration,delete r.stick),null==i&&(i=n.data(u+"start")),null==i&&(i=n.data(u+"time")),null==s&&(s=n.data(u+"duration")),null==o&&(o=n.data(u+"stick")),i=null!=i?t.duration(i):null,s=null!=s?t.duration(s):null,o=Boolean(o),{eventProps:r,startTime:i,duration:s,stick:o}}function ot(e,t){var n,r;for(n=0;t.length>n;n++)if(r=t[n],r.leftCol<=e.rightCol&&r.rightCol>=e.leftCol)return!0;return!1}function ut(e,t){return e.leftCol-t.leftCol}function at(e){var t,n,r;if(e.sort(it),t=ft(e),lt(t),n=t[0]){for(r=0;n.length>r;r++)ct(n[r]);for(r=0;n.length>r;r++)ht(n[r],0,0)}}function ft(e){var t,n,r,i=[];for(t=0;e.length>t;t++){for(n=e[t],r=0;i.length>r&&pt(n,i[r]).length;r++);n.level=r,(i[r]||(i[r]=[])).push(n)}return i}function lt(e){var t,n,r,i,s;for(t=0;e.length>t;t++)for(n=e[t],r=0;n.length>r;r++)for(i=n[r],i.forwardSegs=[],s=t+1;e.length>s;s++)pt(i,e[s],i.forwardSegs)}function ct(e){var t,n,r=e.forwardSegs,i=0;if(void 0===e.forwardPressure){for(t=0;r.length>t;t++)n=r[t],ct(n),i=Math.max(i,1+n.forwardPressure);e.forwardPressure=i}}function ht(e,t,n){var r,i=e.forwardSegs;if(void 0===e.forwardCoord)for(i.length?(i.sort(vt),ht(i[0],t+1,n),e.forwardCoord=i[0].backwardCoord):e.forwardCoord=1,e.backwardCoord=e.forwardCoord-(e.forwardCoord-n)/(t+1),r=0;i.length>r;r++)ht(i[r],0,e.forwardCoord)}function pt(e,t,n){n=n||[];for(var r=0;t.length>r;r++)dt(e,t[r])&&n.push(t[r]);return n}function dt(e,t){return e.bottom>t.top&&e.top<t.bottom}function vt(e,t){return t.forwardPressure-e.forwardPressure||(e.backwardCoord||0)-(t.backwardCoord||0)||it(e,t)}function mt(n,i){function o(e){return(e.locale||e.lang).call(e,et.lang).humanize()}function u(e){st?l()&&(y(),h(e)):a()}function a(){ot=et.theme?"ui":"fc",n.addClass("fc"),et.isRTL?n.addClass("fc-rtl"):n.addClass("fc-ltr"),et.theme?n.addClass("ui-widget"):n.addClass("fc-unthemed"),st=e("<div class='fc-view-container'/>").prependTo(n),rt=new gt(Y,et),it=rt.render(),it&&n.prepend(it),c(et.defaultView),et.handleWindowResize&&(ft=j(w,et.windowResizeDelay),e(window).resize(ft))}function f(){ut&&ut.destroyView(),rt.destroy(),st.remove(),n.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget"),e(window).unbind("resize",ft)}function l(){return n.is(":visible")}function c(e){h(0,e)}function h(t,n){vt++,ut&&n&&ut.type!==n&&(rt.deactivateButton(ut.type),V(),ut.start&&ut.destroyView(),ut.el.remove(),ut=null),!ut&&n&&(ut=p(n),ut.el=e("<div class='fc-view fc-"+n+"-view' />").appendTo(st),rt.activateButton(n)),ut&&(0>t?lt=ut.computePrevDate(lt):t>0&&(lt=ut.computeNextDate(lt)),ut.start&&!t&&lt.isWithin(ut.intervalStart,ut.intervalEnd)||l()&&(V(),ut.start&&ut.destroyView(),ut.setDate(lt),ut.renderView(),$(),M(),_(),k())),$(),vt--}function p(e){var t=d(e);return new t["class"](Y,t.options,e)}function d(n){function r(t){"function"==typeof t?s=t:"object"==typeof t&&e.extend(i,t)}var i,s,u,a,f,l=et.defaultButtonText||{},c=et.buttonText||{},h=et.views||{},p=n,d=[],v=!1;if(dt[n])return dt[n];for(;p&&!s;)i={},r(Tt[p]),r(h[p]),d.unshift(i),p=i.type;return d.unshift({}),i=e.extend.apply(e,d),s?(u=i.duration||s.duration,u&&(u=t.duration(u),a=S(u),v=1===x(a,u)),v&&h[a]&&(i=e.extend({},h[a],i)),f=c[n]||(v?c[a]:null)||l[n]||(v?l[a]:null)||i.buttonText||s.buttonText||(u?o(u):null)||n,dt[n]={"class":s,options:i,buttonText:f}):void 0}function v(e){return Boolean(d(e))}function m(e){var t=d(e);return t?t.buttonText:void 0}function g(e){return l()?(e&&b(),vt++,ut.updateSize(!0),vt--,!0):void 0}function y(){l()&&b()}function b(){at="number"==typeof et.contentHeight?et.contentHeight:"number"==typeof et.height?et.height-(it?it.outerHeight(!0):0):Math.round(st.width()/Math.max(et.aspectRatio,.5))}function w(e){!vt&&e.target===window&&ut.start&&g(!0)&&ut.trigger("windowResize",pt)}function E(){N(),L()}function T(){l()&&(V(),ut.destroyViewEvents(),ut.renderViewEvents(mt),$())}function N(){V(),ut.destroyViewEvents(),$()}function k(){!et.lazyFetching||ct(ut.start,ut.end)?L():T()}function L(){ht(ut.start,ut.end)}function A(e){mt=e,T()}function O(){T()}function M(){rt.updateTitle(ut.computeTitle())}function _(){var e=Y.getNow();e.isWithin(ut.intervalStart,ut.intervalEnd)?rt.disableButton("today"):rt.enableButton("today")}function D(e,t){e=Y.moment(e),t=t?Y.moment(t):e.hasTime()?e.clone().add(Y.defaultTimedEventDuration):e.clone().add(Y.defaultAllDayEventDuration),ut.select({start:e,end:t})}function H(){ut&&ut.unselect()}function B(){h(-1)}function F(){h(1)}function I(){lt.add(-1,"years"),h()}function q(){lt.add(1,"years"),h()}function R(){lt=Y.getNow(),h()}function U(e){lt=Y.moment(e),h()}function z(e){lt.add(t.duration(e)),h()}function W(e,t){var n,r;t&&v(t)||(t=t||"day",n=rt.getViewsWithButtons().join(" "),r=n.match(RegExp("\\w+"+P(t))),r||(r=n.match(/\w+Day/)),t=r?r[0]:"agendaDay"),lt=e,c(t)}function X(){return lt.clone()}function V(){st.css({width:"100%",height:st.height(),overflow:"hidden"})}function $(){st.css({width:"",height:"",overflow:""})}function J(){return Y}function K(){return ut}function Q(e,t){return void 0===t?et[e]:(("height"==e||"contentHeight"==e||"aspectRatio"==e)&&(et[e]=t,g(!0)),void 0)}function G(e,t){return et[e]?et[e].apply(t||pt,Array.prototype.slice.call(arguments,2)):void 0}var Y=this;i=i||{};var Z,et=r({},wt,i);Z=et.lang in Nt?Nt[et.lang]:Nt[wt.lang],Z&&(et=r({},wt,Z,i)),et.isRTL&&(et=r({},wt,St,Z||{},i)),Y.options=et,Y.render=u,Y.destroy=f,Y.refetchEvents=E,Y.reportEvents=A,Y.reportEventChange=O,Y.rerenderEvents=T,Y.changeView=c,Y.select=D,Y.unselect=H,Y.prev=B,Y.next=F,Y.prevYear=I,Y.nextYear=q,Y.today=R,Y.gotoDate=U,Y.incrementDate=z,Y.zoomTo=W,Y.getDate=X,Y.getCalendar=J,Y.getView=K,Y.option=Q,Y.trigger=G,Y.isValidViewType=v,Y.getViewButtonText=m;var tt=C(s(et.lang));if(et.monthNames&&(tt._months=et.monthNames),et.monthNamesShort&&(tt._monthsShort=et.monthNamesShort),et.dayNames&&(tt._weekdays=et.dayNames),et.dayNamesShort&&(tt._weekdaysShort=et.dayNamesShort),null!=et.firstDay){var nt=C(tt._week);nt.dow=et.firstDay,tt._week=nt}Y.defaultAllDayEventDuration=t.duration(et.defaultAllDayEventDuration),Y.defaultTimedEventDuration=t.duration(et.defaultTimedEventDuration),Y.moment=function(){var e;return"local"===et.timezone?(e=xt.moment.apply(null,arguments),e.hasTime()&&e.local()):e="UTC"===et.timezone?xt.moment.utc.apply(null,arguments):xt.moment.parseZone.apply(null,arguments),"_locale"in e?e._locale=tt:e._lang=tt,e},Y.getIsAmbigTimezone=function(){return"local"!==et.timezone&&"UTC"!==et.timezone},Y.rezoneDate=function(e){return Y.moment(e.toArray())},Y.getNow=function(){var e=et.now;return"function"==typeof e&&(e=e()),Y.moment(e)},Y.calculateWeekNumber=function(e){var t=et.weekNumberCalculation;return"function"==typeof t?t(e):"local"===t?e.week():"ISO"===t.toUpperCase()?e.isoWeek():void 0},Y.getEventEnd=function(e){return e.end?e.end.clone():Y.getDefaultEventEnd(e.allDay,e.start)},Y.getDefaultEventEnd=function(e,t){var n=t.clone();return e?n.stripTime().add(Y.defaultAllDayEventDuration):n.add(Y.defaultTimedEventDuration),Y.getIsAmbigTimezone()&&n.stripZone(),n},yt.call(Y,et);var rt,it,st,ot,ut,at,ft,lt,ct=Y.isFetchNeeded,ht=Y.fetchEvents,pt=n[0],dt={},vt=0,mt=[];lt=null!=et.defaultDate?Y.moment(et.defaultDate):Y.getNow(),Y.getSuggestedViewHeight=function(){return void 0===at&&y(),at},Y.isHeightAuto=function(){return"auto"===et.contentHeight||"auto"===et.height}}function gt(t,n){function r(){var t=n.header;return p=n.theme?"ui":"fc",t?d=e("<div class='fc-toolbar'/>").append(s("left")).append(s("right")).append(s("center")).append('<div class="fc-clear"/>'):void 0}function i(){d.remove()}function s(r){var i=e('<div class="fc-'+r+'"/>'),s=n.header[r];return s&&e.each(s.split(" "),function(){var r,s=e(),o=!0;e.each(this.split(","),function(r,i){var u,a,f,l,c,h,d,m,g;"title"==i?(s=s.add(e("<h2>&nbsp;</h2>")),o=!1):(t[i]?u=function(){t[i]()}:t.isValidViewType(i)&&(u=function(){t.changeView(i)},v.push(i),c=t.getViewButtonText(i)),u&&(a=b(n.themeButtonIcons,i),f=b(n.buttonIcons,i),l=b(n.defaultButtonText,i),h=b(n.buttonText,i),d=c||h?_(c||h):a&&n.theme?"<span class='ui-icon ui-icon-"+a+"'></span>":f&&!n.theme?"<span class='fc-icon fc-icon-"+f+"'></span>":_(l||i),m=["fc-"+i+"-button",p+"-button",p+"-state-default"],g=e('<button type="button" class="'+m.join(" ")+'">'+d+"</button>").click(function(){g.hasClass(p+"-state-disabled")||(u(),(g.hasClass(p+"-state-active")||g.hasClass(p+"-state-disabled"))&&g.removeClass(p+"-state-hover"))}).mousedown(function(){g.not("."+p+"-state-active").not("."+p+"-state-disabled").addClass(p+"-state-down")}).mouseup(function(){g.removeClass(p+"-state-down")}).hover(function(){g.not("."+p+"-state-active").not("."+p+"-state-disabled").addClass(p+"-state-hover")},function(){g.removeClass(p+"-state-hover").removeClass(p+"-state-down")}),s=s.add(g)))}),o&&s.first().addClass(p+"-corner-left").end().last().addClass(p+"-corner-right").end(),s.length>1?(r=e("<div/>"),o&&r.addClass("fc-button-group"),r.append(s),i.append(r)):i.append(s)}),i}function o(e){d.find("h2").text(e)}function u(e){d.find(".fc-"+e+"-button").addClass(p+"-state-active")}function a(e){d.find(".fc-"+e+"-button").removeClass(p+"-state-active")}function f(e){d.find(".fc-"+e+"-button").attr("disabled","disabled").addClass(p+"-state-disabled")}function l(e){d.find(".fc-"+e+"-button").removeAttr("disabled").removeClass(p+"-state-disabled")}function c(){return v}var h=this;h.render=r,h.destroy=i,h.updateTitle=o,h.activateButton=u,h.deactivateButton=a,h.disableButton=f,h.enableButton=l,h.getViewsWithButtons=c;var p,d=e(),v=[]}function yt(n){function r(e,t){return!U||e.clone().stripZone()<U.clone().stripZone()||t.clone().stripZone()>z.clone().stripZone()}function i(e,t){U=e,z=t,Y=[];var n=++K,r=J.length;Q=r;for(var i=0;r>i;i++)s(J[i],n)}function s(t,n){o(t,function(r){var i,s,o,u=e.isArray(t.events);if(n==K){if(r)for(i=0;r.length>i;i++)s=r[i],o=u?s:S(s,t),o&&Y.push.apply(Y,k(o));Q--,Q||V(Y)}})}function o(t,r){var i,s,u=xt.sourceFetchers;for(i=0;u.length>i;i++){if(s=u[i].call(R,t,U.clone(),z.clone(),n.timezone,r),s===!0)return;if("object"==typeof s)return o(s,r),void 0}var a=t.events;if(a)e.isFunction(a)?(y(),a.call(R,U.clone(),z.clone(),n.timezone,function(e){r(e),b()})):e.isArray(a)?r(a):r();else{var f=t.url;if(f){var l,c=t.success,h=t.error,p=t.complete;l=e.isFunction(t.data)?t.data():t.data;var d=e.extend({},l||{}),v=M(t.startParam,n.startParam),m=M(t.endParam,n.endParam),g=M(t.timezoneParam,n.timezoneParam);v&&(d[v]=U.format()),m&&(d[m]=z.format()),n.timezone&&"local"!=n.timezone&&(d[g]=n.timezone),y(),e.ajax(e.extend({},Gt,t,{data:d,success:function(t){t=t||[];var n=O(c,this,arguments);e.isArray(n)&&(t=n),r(t)},error:function(){O(h,this,arguments),r()},complete:function(){O(p,this,arguments),b()}}))}else r()}}function u(e){var t=a(e);t&&(J.push(t),Q++,s(t,K))}function a(t){var n,r,i=xt.sourceNormalizers;if(e.isFunction(t)||e.isArray(t)?n={events:t}:"string"==typeof t?n={url:t}:"object"==typeof t&&(n=e.extend({},t)),n){for(n.className?"string"==typeof n.className&&(n.className=n.className.split(/\s+/)):n.className=[],e.isArray(n.events)&&(n.origArray=n.events,n.events=e.map(n.events,function(e){return S(e,n)})),r=0;i.length>r;r++)i[r].call(R,n);return n}}function f(t){J=e.grep(J,function(e){return!l(e,t)}),Y=e.grep(Y,function(e){return!l(e.source,t)}),V(Y)}function l(e,t){return e&&t&&c(e)==c(t)}function c(e){return("object"==typeof e?e.origArray||e.googleCalendarId||e.url||e.events:null)||e}function h(e){e.start=R.moment(e.start),e.end=e.end?R.moment(e.end):null,L(e,p(e)),V(Y)}function p(t){var n={};return e.each(t,function(e,t){d(e)&&void 0!==t&&A(t)&&(n[e]=t)}),n}function d(e){return!/^_|^(id|allDay|start|end)$/.test(e)}function v(e,t){var n,r,i,s=S(e);if(s){for(n=k(s),r=0;n.length>r;r++)i=n[r],i.source||(t&&($.events.push(i),i.source=$),Y.push(i));return V(Y),n}return[]}function m(t){var n,r;for(null==t?t=function(){return!0}:e.isFunction(t)||(n=t+"",t=function(e){return e._id==n}),Y=e.grep(Y,t,!0),r=0;J.length>r;r++)e.isArray(J[r].events)&&(J[r].events=e.grep(J[r].events,t,!0));V(Y)}function g(t){return e.isFunction(t)?e.grep(Y,t):null!=t?(t+="",e.grep(Y,function(e){return e._id==t})):Y}function y(){G++||W("loading",null,!0,X())}function b(){--G||W("loading",null,!1,X())}function S(r,i){var s,o,u,a={};if(n.eventDataTransform&&(r=n.eventDataTransform(r)),i&&i.eventDataTransform&&(r=i.eventDataTransform(r)),e.extend(a,r),i&&(a.source=i),a._id=r._id||(void 0===r.id?"_fc"+Yt++:r.id+""),a.className=r.className?"string"==typeof r.className?r.className.split(/\s+/):r.className:[],s=r.start||r.date,o=r.end,N(s)&&(s=t.duration(s)),N(o)&&(o=t.duration(o)),r.dow||t.isDuration(s)||t.isDuration(o))a.start=s?t.duration(s):null,a.end=o?t.duration(o):null,a._recurring=!0;else{if(s&&(s=R.moment(s),!s.isValid()))return!1;o&&(o=R.moment(o),o.isValid()||(o=null)),u=r.allDay,void 0===u&&(u=M(i?i.allDayDefault:void 0,n.allDayDefault)),x(s,o,u,a)}return a}function x(e,t,n,r){r.start=e,r.end=t,r.allDay=n,T(r),bt(r)}function T(e){null==e.allDay&&(e.allDay=!(e.start.hasTime()||e.end&&e.end.hasTime())),e.allDay?(e.start.stripTime(),e.end&&e.end.stripTime()):(e.start.hasTime()||(e.start=R.rezoneDate(e.start)),e.end&&!e.end.hasTime()&&(e.end=R.rezoneDate(e.end))),e.end&&!e.end.isAfter(e.start)&&(e.end=null),e.end||(e.end=n.forceEventDuration?R.getDefaultEventEnd(e.allDay,e.start):null)}function C(e){var t;return e.end||(t=e.allDay,null==t&&(t=!e.start.hasTime()),e={start:e.start,end:R.getDefaultEventEnd(t,e.start)}),e}function k(t,n,r){var i,s,o,u,a,f,l,c,h,p=[];if(n=n||U,r=r||z,t)if(t._recurring){if(s=t.dow)for(i={},o=0;s.length>o;o++)i[s[o]]=!0;for(u=n.clone().stripTime();u.isBefore(r);)(!i||i[u.day()])&&(a=t.start,f=t.end,l=u.clone(),c=null,a&&(l=l.time(a)),f&&(c=u.clone().time(f)),h=e.extend({},t),x(l,c,!a&&!f,h),p.push(h)),u.add(1,"days")}else p.push(t);return p}function L(t,n){var r,i,s,o,u={};return n=n||{},n.start||(n.start=t.start.clone()),void 0===n.end&&(n.end=t.end?t.end.clone():null),null==n.allDay&&(n.allDay=t.allDay),T(n),r=null!==t._end&&null===n.end,i=n.allDay?E(n.start,t._start):w(n.start,t._start),!r&&n.end&&(s=w(n.end,n.start).subtract(w(t._end||R.getDefaultEventEnd(t._allDay,t._start),t._start))),e.each(n,function(e,t){d(e)&&void 0!==t&&(u[e]=t)}),o=_(g(t._id),r,n.allDay,i,s,u),{dateDelta:i,durationDelta:s,undo:o}}function _(t,n,r,i,s,o){var u=R.getIsAmbigTimezone(),a=[];return i&&!i.valueOf()&&(i=null),s&&!s.valueOf()&&(s=null),e.each(t,function(t,f){var l,c;l={start:f.start.clone(),end:f.end?f.end.clone():null,allDay:f.allDay},e.each(o,function(e){l[e]=f[e]}),c={start:f._start,end:f._end,allDay:f._allDay},n&&(c.end=null),c.allDay=r,T(c),i&&(c.start.add(i),c.end&&c.end.add(i)),s&&(c.end||(c.end=R.getDefaultEventEnd(c.allDay,c.start)),c.end.add(s)),u&&!c.allDay&&(i||s)&&(c.start.stripZone(),c.end&&c.end.stripZone()),e.extend(f,o,c),bt(f),a.push(function(){e.extend(f,l),bt(f)})}),function(){for(var e=0;a.length>e;e++)a[e]()}}function D(){var t,r=n.businessHours,i={className:"fc-nonbusiness",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"},s=R.getView();return r&&(t="object"==typeof r?e.extend({},i,r):i),t?k(S(t),s.start,s.end):[]}function P(e,t){var r=t.source||{},i=M(t.constraint,r.constraint,n.eventConstraint),s=M(t.overlap,r.overlap,n.eventOverlap);return e=C(e),j(e,i,s,t)}function H(e){return j(e,n.selectConstraint,n.selectOverlap)}function B(t,n){var r,i;return n&&(r=e.extend({},n,t),i=k(S(r))[0]),i?P(t,i):(t=C(t),H(t))}function j(e,t,n,r){var i,s,o,u,a;if(e={start:e.start.clone().stripZone(),end:e.end.clone().stripZone()},null!=t){for(i=F(t),s=!1,o=0;i.length>o;o++)if(I(i[o],e)){s=!0;break}if(!s)return!1}for(o=0;Y.length>o;o++)if(u=Y[o],(!r||r._id!==u._id)&&q(u,e)){if(n===!1)return!1;if("function"==typeof n&&!n(u,r))return!1;if(r){if(a=M(u.overlap,(u.source||{}).overlap),a===!1)return!1;if("function"==typeof a&&!a(r,u))return!1}}return!0}function F(e){return"businessHours"===e?D():"object"==typeof e?k(S(e)):g(e)}function I(e,t){var n=e.start.clone().stripZone(),r=R.getEventEnd(e).stripZone();return t.start>=n&&r>=t.end}function q(e,t){var n=e.start.clone().stripZone(),r=R.getEventEnd(e).stripZone();return r>t.start&&t.end>n}var R=this;R.isFetchNeeded=r,R.fetchEvents=i,R.addEventSource=u,R.removeEventSource=f,R.updateEvent=h,R.renderEvent=v,R.removeEvents=m,R.clientEvents=g,R.mutateEvent=L,R.normalizeEventDateProps=T,R.ensureVisibleEventRange=C;var U,z,W=R.trigger,X=R.getView,V=R.reportEvents,$={events:[]},J=[$],K=0,Q=0,G=0,Y=[];e.each((n.events?[n.events]:[]).concat(n.eventSources||[]),function(e,t){var n=a(t);n&&J.push(n)}),R.getBusinessHoursEvents=D,R.isEventRangeAllowed=P,R.isSelectionRangeAllowed=H,R.isExternalDropRangeAllowed=B}function bt(e){e._allDay=e.allDay,e._start=e.start.clone(),e._end=e.end?e.end.clone():null}var wt={titleRangeSeparator:" — ",monthYearFormat:"MMMM YYYY",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,isRTL:!1,defaultButtonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventLimit:!1,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:200},Et={dayPopoverFormat:"dddd, MMMM D"},St={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}},xt=e.fullCalendar={version:"2.2.5"},Tt=xt.views={};e.fn.fullCalendar=function(t){var n=Array.prototype.slice.call(arguments,1),r=this;return this.each(function(i,s){var o,u=e(s),a=u.data("fullCalendar");"string"==typeof t?a&&e.isFunction(a[t])&&(o=a[t].apply(a,n),i||(r=o),"destroy"===t&&u.removeData("fullCalendar")):a||(a=new mt(u,t),u.data("fullCalendar",a),a.render())}),r};var Nt=xt.langs={};xt.datepickerLang=function(t,n,r){var i=Nt[t]||(Nt[t]={});i.isRTL=r.isRTL,i.weekNumberTitle=r.weekHeader,e.each(Ct,function(e,t){i[e]=t(r)}),e.datepicker&&(e.datepicker.regional[n]=e.datepicker.regional[t]=r,e.datepicker.regional.en=e.datepicker.regional[""],e.datepicker.setDefaults(r))},xt.lang=function(t,n){var i,o;i=Nt[t]||(Nt[t]={}),n&&r(i,n),o=s(t),e.each(kt,function(e,t){void 0===i[e]&&(i[e]=t(o,i))}),wt.lang=t};var Ct={defaultButtonText:function(e){return{prev:D(e.prevText),next:D(e.nextText),today:D(e.currentText)}},monthYearFormat:function(e){return e.showMonthAfterYear?"YYYY["+e.yearSuffix+"] MMMM":"MMMM YYYY["+e.yearSuffix+"]"}},kt={dayOfMonthFormat:function(e,t){var n=e.longDateFormat("l");return n=n.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),t.isRTL?n+=" ddd":n="ddd "+n,n},smallTimeFormat:function(e){return e.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},extraSmallTimeFormat:function(e){return e.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")},noMeridiemTimeFormat:function(e){return e.longDateFormat("LT").replace(/\s*a$/i,"")}};xt.lang("en",Et),xt.intersectionToSeg=y,xt.applyAll=O,xt.debounce=j;var Lt,At,Ot,Mt=["sun","mon","tue","wed","thu","fri","sat"],_t=["year","month","week","day","hour","minute","second","millisecond"],Dt={}.hasOwnProperty,Pt=/^\s*\d{4}-\d\d$/,Ht=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/,Bt=t.fn,jt=e.extend({},Bt);xt.moment=function(){return F(arguments)},xt.moment.utc=function(){var e=F(arguments,!0);return e.hasTime()&&e.utc(),e},xt.moment.parseZone=function(){return F(arguments,!0,!0)},Bt.clone=function(){var e=jt.clone.apply(this,arguments);return q(this,e),this._fullCalendar&&(e._fullCalendar=!0),e},Bt.time=function(e){if(!this._fullCalendar)return jt.time.apply(this,arguments);if(null==e)return t.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});this._ambigTime=!1,t.isDuration(e)||t.isMoment(e)||(e=t.duration(e));var n=0;return t.isDuration(e)&&(n=24*Math.floor(e.asDays())),this.hours(n+e.hours()).minutes(e.minutes()).seconds(e.seconds()).milliseconds(e.milliseconds())},Bt.stripTime=function(){var e;return this._ambigTime||(e=this.toArray(),this.utc(),At(this,e.slice(0,3)),this._ambigTime=!0,this._ambigZone=!0),this},Bt.hasTime=function(){return!this._ambigTime},Bt.stripZone=function(){var e,t;return this._ambigZone||(e=this.toArray(),t=this._ambigTime,this.utc(),At(this,e),t&&(this._ambigTime=!0),this._ambigZone=!0),this},Bt.hasZone=function(){return!this._ambigZone},Bt.zone=function(e){return null!=e&&(this._ambigTime=!1,this._ambigZone=!1),jt.zone.apply(this,arguments)},Bt.local=function(){var e=this.toArray(),t=this._ambigZone;return jt.local.apply(this,arguments),t&&Ot(this,e),this},Bt.format=function(){return this._fullCalendar&&arguments[0]?z(this,arguments[0]):this._ambigTime?U(this,"YYYY-MM-DD"):this._ambigZone?U(this,"YYYY-MM-DD[T]HH:mm:ss"):jt.format.apply(this,arguments)},Bt.toISOString=function(){return this._ambigTime?U(this,"YYYY-MM-DD"):this._ambigZone?U(this,"YYYY-MM-DD[T]HH:mm:ss"):jt.toISOString.apply(this,arguments)},Bt.isWithin=function(e,t){var n=I([this,e,t]);return n[0]>=n[1]&&n[0]<n[2]},Bt.isSame=function(e,t){var n;return this._fullCalendar?t?(n=I([this,e],!0),jt.isSame.call(n[0],n[1],t)):(e=xt.moment.parseZone(e),jt.isSame.call(this,e)&&Boolean(this._ambigTime)===Boolean(e._ambigTime)&&Boolean(this._ambigZone)===Boolean(e._ambigZone)):jt.isSame.apply(this,arguments)},e.each(["isBefore","isAfter"],function(e,t){Bt[t]=function(e,n){var r;return this._fullCalendar?(r=I([this,e]),jt[t].call(r[0],r[1],n)):jt[t].apply(this,arguments)}}),Lt="_d"in t()&&"updateOffset"in t,At=Lt?function(e,n){e._d.setTime(Date.UTC.apply(Date,n)),t.updateOffset(e,!1)}:R,Ot=Lt?function(e,n){e._d.setTime(+(new Date(n[0]||0,n[1]||0,n[2]||0,n[3]||0,n[4]||0,n[5]||0,n[6]||0))),t.updateOffset(e,!1)}:R;var Ft={t:function(e){return U(e,"a").charAt(0)},T:function(e){return U(e,"A").charAt(0)}};xt.formatRange=V;var It={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"},qt={};xt.Class=G,G.extend=function(e){var t,n=this;return e=e||{},L(e,"constructor")&&(t=e.constructor),"function"!=typeof t&&(t=e.constructor=function(){n.apply(this,arguments)}),t.prototype=C(n.prototype),k(e,t.prototype),k(n,t),t},G.mixin=function(e){k(e.prototype||e,this.prototype)};var Rt=G.extend({isHidden:!0,options:null,el:null,documentMousedownProxy:null,margin:10,constructor:function(e){this.options=e||{}},show:function(){this.isHidden&&(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},hide:function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},render:function(){var t=this,n=this.options;this.el=e('<div class="fc-popover"/>').addClass(n.className||"").css({top:0,left:0}).append(n.content).appendTo(n.parentEl),this.el.on("click",".fc-close",function(){t.hide()}),n.autoHide&&e(document).on("mousedown",this.documentMousedownProxy=e.proxy(this,"documentMousedown"))},documentMousedown:function(t){this.el&&!e(t.target).closest(this.el).length&&this.hide()},destroy:function(){this.hide(),this.el&&(this.el.remove(),this.el=null),e(document).off("mousedown",this.documentMousedownProxy)},position:function(){var t,n,r,i,s,o=this.options,u=this.el.offsetParent().offset(),a=this.el.outerWidth(),f=this.el.outerHeight(),l=e(window),c=v(this.el);i=o.top||0,s=void 0!==o.left?o.left:void 0!==o.right?o.right-a:0,c.is(window)||c.is(document)?(c=l,t=0,n=0):(r=c.offset(),t=r.top,n=r.left),t+=l.scrollTop(),n+=l.scrollLeft(),o.viewportConstrain!==!1&&(i=Math.min(i,t+c.outerHeight()-f-this.margin),i=Math.max(i,t+this.margin),s=Math.min(s,n+c.outerWidth()-a-this.margin),s=Math.max(s,n+this.margin)),this.el.css({top:i-u.top,left:s-u.left})},trigger:function(e){this.options[e]&&this.options[e].apply(this,Array.prototype.slice.call(arguments,1))}}),Ut=G.extend({grid:null,rowCoords:null,colCoords:null,containerEl:null,minX:null,maxX:null,minY:null,maxY:null,constructor:function(e){this.grid=e},build:function(){this.rowCoords=this.grid.computeRowCoords(),this.colCoords=this.grid.computeColCoords(),this.computeBounds()},clear:function(){this.rowCoords=null,this.colCoords=null},getCell:function(e,t){var n,r,i,s=this.rowCoords,o=this.colCoords,u=null,a=null;if(this.inBounds(e,t)){for(n=0;s.length>n;n++)if(r=s[n],t>=r.top&&r.bottom>t){u=n;break}for(n=0;o.length>n;n++)if(r=o[n],e>=r.left&&r.right>e){a=n;break}if(null!==u&&null!==a)return i=this.grid.getCell(u,a),i.grid=this.grid,i}return null},computeBounds:function(){var e;this.containerEl&&(e=this.containerEl.offset(),this.minX=e.left,this.maxX=e.left+this.containerEl.outerWidth(),this.minY=e.top,this.maxY=e.top+this.containerEl.outerHeight())},inBounds:function(e,t){return this.containerEl?e>=this.minX&&this.maxX>e&&t>=this.minY&&this.maxY>t:!0}}),zt=G.extend({coordMaps:null,constructor:function(e){this.coordMaps=e},build:function(){var e,t=this.coordMaps;for(e=0;t.length>e;e++)t[e].build()},getCell:function(e,t){var n,r=this.coordMaps,i=null;for(n=0;r.length>n&&!i;n++)i=r[n].getCell(e,t);return i},clear:function(){var e,t=this.coordMaps;for(e=0;t.length>e;e++)t[e].clear()}}),Wt=G.extend({coordMap:null,options:null,isListening:!1,isDragging:!1,origCell:null,cell:null,mouseX0:null,mouseY0:null,mousemoveProxy:null,mouseupProxy:null,scrollEl:null,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollHandlerProxy:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,constructor:function(e,t){this.coordMap=e,this.options=t||{}},mousedown:function(e){g(e)&&(e.preventDefault(),this.startListening(e),this.options.distance||this.startDrag(e))},startListening:function(t){var n,r;this.isListening||(t&&this.options.scroll&&(n=v(e(t.target)),n.is(window)||n.is(document)||(this.scrollEl=n,this.scrollHandlerProxy=j(e.proxy(this,"scrollHandler"),100),this.scrollEl.on("scroll",this.scrollHandlerProxy))),this.computeCoords(),t&&(r=this.getCell(t),this.origCell=r,this.mouseX0=t.pageX,this.mouseY0=t.pageY),e(document).on("mousemove",this.mousemoveProxy=e.proxy(this,"mousemove")).on("mouseup",this.mouseupProxy=e.proxy(this,"mouseup")).on("selectstart",this.preventDefault),this.isListening=!0,this.trigger("listenStart",t))},computeCoords:function(){this.coordMap.build(),this.computeScrollBounds()},mousemove:function(e){var t,n;this.isDragging||(t=this.options.distance||1,n=Math.pow(e.pageX-this.mouseX0,2)+Math.pow(e.pageY-this.mouseY0,2),n>=t*t&&this.startDrag(e)),this.isDragging&&this.drag(e)},startDrag:function(e){var t;this.isListening||this.startListening(),this.isDragging||(this.isDragging=!0,this.trigger("dragStart",e),t=this.getCell(e),t&&this.cellOver(t))},drag:function(e){var t;this.isDragging&&(t=this.getCell(e),Y(t,this.cell)||(this.cell&&this.cellOut(),t&&this.cellOver(t)),this.dragScroll(e))},cellOver:function(e){this.cell=e,this.trigger("cellOver",e,Y(e,this.origCell))},cellOut:function(){this.cell&&(this.trigger("cellOut",this.cell),this.cell=null)},mouseup:function(e){this.stopDrag(e),this.stopListening(e)},stopDrag:function(e){this.isDragging&&(this.stopScrolling(),this.trigger("dragStop",e),this.isDragging=!1)},stopListening:function(t){this.isListening&&(this.scrollEl&&(this.scrollEl.off("scroll",this.scrollHandlerProxy),this.scrollHandlerProxy=null),e(document).off("mousemove",this.mousemoveProxy).off("mouseup",this.mouseupProxy).off("selectstart",this.preventDefault),this.mousemoveProxy=null,this.mouseupProxy=null,this.isListening=!1,this.trigger("listenStop",t),this.origCell=this.cell=null,this.coordMap.clear())},getCell:function(e){return this.coordMap.getCell(e.pageX,e.pageY)},trigger:function(e){this.options[e]&&this.options[e].apply(this,Array.prototype.slice.call(arguments,1))},preventDefault:function(e){e.preventDefault()},computeScrollBounds:function(){var e,t=this.scrollEl;t&&(e=t.offset(),this.scrollBounds={top:e.top,left:e.left,bottom:e.top+t.outerHeight(),right:e.left+t.outerWidth()})},dragScroll:function(e){var t,n,r,i,s=this.scrollSensitivity,o=this.scrollBounds,u=0,a=0;o&&(t=(s-(e.pageY-o.top))/s,n=(s-(o.bottom-e.pageY))/s,r=(s-(e.pageX-o.left))/s,i=(s-(o.right-e.pageX))/s,t>=0&&1>=t?u=-1*t*this.scrollSpeed:n>=0&&1>=n&&(u=n*this.scrollSpeed),r>=0&&1>=r?a=-1*r*this.scrollSpeed:i>=0&&1>=i&&(a=i*this.scrollSpeed)),this.setScrollVel(u,a)},setScrollVel:function(t,n){this.scrollTopVel=t,this.scrollLeftVel=n,this.constrainScrollVel(),!this.scrollTopVel&&!this.scrollLeftVel||this.scrollIntervalId||(this.scrollIntervalId=setInterval(e.proxy(this,"scrollIntervalFunc"),this.scrollIntervalMs))},constrainScrollVel:function(){var e=this.scrollEl;0>this.scrollTopVel?0>=e.scrollTop()&&(this.scrollTopVel=0):this.scrollTopVel>0&&e.scrollTop()+e[0].clientHeight>=e[0].scrollHeight&&(this.scrollTopVel=0),0>this.scrollLeftVel?0>=e.scrollLeft()&&(this.scrollLeftVel=0):this.scrollLeftVel>0&&e.scrollLeft()+e[0].clientWidth>=e[0].scrollWidth&&(this.scrollLeftVel=0)},scrollIntervalFunc:function(){var e=this.scrollEl,t=this.scrollIntervalMs/1e3;this.scrollTopVel&&e.scrollTop(e.scrollTop()+this.scrollTopVel*t),this.scrollLeftVel&&e.scrollLeft(e.scrollLeft()+this.scrollLeftVel*t),this.constrainScrollVel(),this.scrollTopVel||this.scrollLeftVel||this.stopScrolling()},stopScrolling:function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.computeCoords())},scrollHandler:function(){this.scrollIntervalId||this.computeCoords()}}),Xt=G.extend({options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,mouseY0:null,mouseX0:null,topDelta:null,leftDelta:null,mousemoveProxy:null,isFollowing:!1,isHidden:!1,isAnimating:!1,constructor:function(t,n){this.options=n=n||{},this.sourceEl=t,this.parentEl=n.parentEl?e(n.parentEl):t.parent()},start:function(t){this.isFollowing||(this.isFollowing=!0,this.mouseY0=t.pageY,this.mouseX0=t.pageX,this.topDelta=0,this.leftDelta=0,this.isHidden||this.updatePosition(),e(document).on("mousemove",this.mousemoveProxy=e.proxy(this,"mousemove")))},stop:function(t,n){function r(){this.isAnimating=!1,i.destroyEl(),this.top0=this.left0=null,n&&n()}var i=this,s=this.options.revertDuration;this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,e(document).off("mousemove",this.mousemoveProxy),t&&s&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:s,complete:r})):r())},getEl:function(){var e=this.el;return e||(this.sourceEl.width(),e=this.el=this.sourceEl.clone().css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}).appendTo(this.parentEl)),e},destroyEl:function(){this.el&&(this.el.remove(),this.el=null)},updatePosition:function(){var e,t;this.getEl(),null===this.top0&&(this.sourceEl.width(),e=this.sourceEl.offset(),t=this.el.offsetParent().offset(),this.top0=e.top-t.top,this.left0=e.left-t.left),this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},mousemove:function(e){this.topDelta=e.pageY-this.mouseY0,this.leftDelta=e.pageX-this.mouseX0,this.isHidden||this.updatePosition()},hide:function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}}),Vt=G.extend({view:null,isRTL:null,cellHtml:"<td/>",constructor:function(e){this.view=e,this.isRTL=e.opt("isRTL")},rowHtml:function(e,t){var n,r,i=this.getHtmlRenderer("cell",e),s="";for(t=t||0,n=0;this.colCnt>n;n++)r=this.getCell(t,n),s+=i(r);return s=this.bookendCells(s,e,t),"<tr>"+s+"</tr>"},bookendCells:function(e,t,n){var r=this.getHtmlRenderer("intro",t)(n||0),i=this.getHtmlRenderer("outro",t)(n||0),s=this.isRTL?i:r,o=this.isRTL?r:i;return"string"==typeof e?s+e+o:e.prepend(s).append(o)},getHtmlRenderer:function(e,t){var n,r,i,s,o=this.view;return n=e+"Html",t&&(r=t+P(e)+"Html"),r&&(s=o[r])?i=o:r&&(s=this[r])?i=this:(s=o[n])?i=o:(s=this[n])&&(i=this),"function"==typeof s?function(){return s.apply(i,arguments)||""}:function(){return s||""}}}),$t=xt.Grid=Vt.extend({start:null,end:null,rowCnt:0,colCnt:0,rowData:null,colData:null,el:null,coordMap:null,elsByFill:null,documentDragStartProxy:null,colHeadFormat:null,eventTimeFormat:null,displayEventEnd:null,constructor:function(){Vt.apply(this,arguments),this.coordMap=new Ut(this),this.elsByFill={},this.documentDragStartProxy=e.proxy(this,"documentDragStart")},render:function(){this.bindHandlers()},destroy:function(){this.unbindHandlers()},computeColHeadFormat:function(){},computeEventTimeFormat:function(){return this.view.opt("smallTimeFormat")},computeDisplayEventEnd:function(){return!1},setRange:function(e){var t=this.view;this.start=e.start.clone(),this.end=e.end.clone(),this.rowData=[],this.colData=[],this.updateCells(),this.colHeadFormat=t.opt("columnFormat")||this.computeColHeadFormat(),this.eventTimeFormat=t.opt("timeFormat")||this.computeEventTimeFormat(),this.displayEventEnd=t.opt("displayEventEnd"),null==this.displayEventEnd&&(this.displayEventEnd=this.computeDisplayEventEnd())},updateCells:function(){},rangeToSegs:function(){},getCell:function(t,n){var r;return null==n&&("number"==typeof t?(n=t%this.colCnt,t=Math.floor(t/this.colCnt)):(n=t.col,t=t.row)),r={row:t,col:n},e.extend(r,this.getRowData(t),this.getColData(n)),e.extend(r,this.computeCellRange(r)),r},computeCellRange:function(){},getRowData:function(e){return this.rowData[e]||{}},getColData:function(e){return this.colData[e]||{}},getRowEl:function(){},getColEl:function(){},getCellDayEl:function(e){return this.getColEl(e.col)||this.getRowEl(e.row)},computeRowCoords:function(){var e,t,n,r=[];for(e=0;this.rowCnt>e;e++)t=this.getRowEl(e),n={top:t.offset().top},e>0&&(r[e-1].bottom=n.top),r.push(n);return n.bottom=n.top+t.outerHeight(),r},computeColCoords:function(){var e,t,n,r=[];for(e=0;this.colCnt>e;e++)t=this.getColEl(e),n={left:t.offset().left},e>0&&(r[e-1].right=n.left),r.push(n);return n.right=n.left+t.outerWidth(),r},bindHandlers:function(){var t=this;this.el.on("mousedown",function(n){e(n.target).is(".fc-event-container *, .fc-more")||e(n.target).closest(".fc-popover").length||t.dayMousedown(n)}),this.bindSegHandlers(),e(document).on("dragstart",this.documentDragStartProxy)},unbindHandlers:function(){e(document).off("dragstart",this.documentDragStartProxy)},dayMousedown:function(e){var t,n,r=this,i=this.view,s=i.opt("selectable"),o=new Wt(this.coordMap,{scroll:i.opt("dragScroll"),dragStart:function(){i.unselect()},cellOver:function(e,i){var u=o.origCell;u&&(t=i?e:null,s&&(n=r.computeSelection(u,e),n?r.renderSelection(n):a()))},cellOut:function(){t=null,n=null,r.destroySelection(),f()},listenStop:function(e){t&&i.trigger("dayClick",r.getCellDayEl(t),t.start,e),n&&i.reportSelection(n,e),f()}});o.mousedown(e)},renderRangeHelper:function(e,t){var n;n=t?C(t.event):{},n.start=e.start.clone(),n.end=e.end?e.end.clone():null,n.allDay=null,this.view.calendar.normalizeEventDateProps(n),n.className=(n.className||[]).concat("fc-helper"),t||(n.editable=!1),this.renderHelper(n,t)},renderHelper:function(){},destroyHelper:function(){},renderSelection:function(e){this.renderHighlight(e)},destroySelection:function(){this.destroyHighlight()},computeSelection:function(e,t){var n,r=[e.start,e.end,t.start,t.end];return r.sort(H),n={start:r[0].clone(),end:r[3].clone()},this.view.calendar.isSelectionRangeAllowed(n)?n:null},renderHighlight:function(e){this.renderFill("highlight",this.rangeToSegs(e))},destroyHighlight:function(){this.destroyFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderFill:function(){},destroyFill:function(e){var t=this.elsByFill[e];t&&(t.remove(),delete this.elsByFill[e])},renderFillSegEls:function(t,n){var r,i=this,s=this[t+"SegEl"],o="",u=[];if(n.length){for(r=0;n.length>r;r++)o+=this.fillSegHtml(t,n[r]);e(o).each(function(t,r){var o=n[t],a=e(r);s&&(a=s.call(i,o,a)),a&&(a=e(a),a.is(i.fillSegTag)&&(o.el=a,u.push(o)))})}return u},fillSegTag:"div",fillSegHtml:function(e,t){var n=this[e+"SegClasses"],r=this[e+"SegStyles"],i=n?n.call(this,t):[],s=r?r.call(this,t):"";return"<"+this.fillSegTag+(i.length?' class="'+i.join(" ")+'"':"")+(s?' style="'+s+'"':"")+" />"},headHtml:function(){return'<div class="fc-row '+this.view.widgetHeaderClass+'">'+"<table>"+"<thead>"+this.rowHtml("head")+"</thead>"+"</table>"+"</div>"},headCellHtml:function(e){var t=this.view,n=e.start;return'<th class="fc-day-header '+t.widgetHeaderClass+" fc-"+Mt[n.day()]+'">'+_(n.format(this.colHeadFormat))+"</th>"},bgCellHtml:function(e){var t=this.view,n=e.start,r=this.getDayClasses(n);return r.unshift("fc-day",t.widgetContentClass),'<td class="'+r.join(" ")+'"'+' data-date="'+n.format("YYYY-MM-DD")+'"'+"></td>"},getDayClasses:function(e){var t=this.view,n=t.calendar.getNow().stripTime(),r=["fc-"+Mt[e.day()]];return"month"===t.name&&e.month()!=t.intervalStart.month()&&r.push("fc-other-month"),e.isSame(n,"day")?r.push("fc-today",t.highlightStateClass):n>e?r.push("fc-past"):r.push("fc-future"),r}});$t.mixin({mousedOverSeg:null,isDraggingSeg:!1,isResizingSeg:!1,segs:null,renderEvents:function(e){var t,n,r=this.eventsToSegs(e),i=[],s=[];for(t=0;r.length>t;t++)n=r[t],Z(n.event)?i.push(n):s.push(n);i=this.renderBgSegs(i)||i,s=this.renderFgSegs(s)||s,this.segs=i.concat(s)},destroyEvents:function(){this.triggerSegMouseout(),this.destroyFgSegs(),this.destroyBgSegs(),this.segs=null},getEventSegs:function(){return this.segs||[]},renderFgSegs:function(){},destroyFgSegs:function(){},renderFgSegEls:function(t,n){var r,i=this.view,s="",o=[];if(t.length){for(r=0;t.length>r;r++)s+=this.fgSegHtml(t[r],n);e(s).each(function(n,r){var s=t[n],u=i.resolveEventEl(s.event,e(r));u&&(u.data("fc-seg",s),s.el=u,o.push(s))})}return o},fgSegHtml:function(){},renderBgSegs:function(e){return this.renderFill("bgEvent",e)},destroyBgSegs:function(){this.destroyFill("bgEvent")},bgEventSegEl:function(e,t){return this.view.resolveEventEl(e.event,t)},bgEventSegClasses:function(e){var t=e.event,n=t.source||{};return["fc-bgevent"].concat(t.className,n.className||[])},bgEventSegStyles:function(e){var t=this.view,n=e.event,r=n.source||{},i=n.color,s=r.color,o=t.opt("eventColor"),u=n.backgroundColor||i||r.backgroundColor||s||t.opt("eventBackgroundColor")||o;return u?"background-color:"+u:""},businessHoursSegClasses:function(){return["fc-nonbusiness","fc-bgevent"]},bindSegHandlers:function(){var t=this,n=this.view;e.each({mouseenter:function(e,n){t.triggerSegMouseover(e,n)},mouseleave:function(e,n){t.triggerSegMouseout(e,n)},click:function(e,t){return n.trigger("eventClick",this,e.event,t)},mousedown:function(r,i){e(i.target).is(".fc-resizer")&&n.isEventResizable(r.event)?t.segResizeMousedown(r,i):n.isEventDraggable(r.event)&&t.segDragMousedown(r,i)}},function(n,r){t.el.on(n,".fc-event-container > *",function(n){var i=e(this).data("fc-seg");return!i||t.isDraggingSeg||t.isResizingSeg?void 0:r.call(this,i,n)})})},triggerSegMouseover:function(e,t){this.mousedOverSeg||(this.mousedOverSeg=e,this.view.trigger("eventMouseover",e.el[0],e.event,t))},triggerSegMouseout:function(e,t){t=t||{},this.mousedOverSeg&&(e=e||this.mousedOverSeg,this.mousedOverSeg=null,this.view.trigger("eventMouseout",e.el[0],e.event,t))},segDragMousedown:function(e,t){var n,r=this,i=this.view,s=e.el,o=e.event,u=new Xt(e.el,{parentEl:i.el,opacity:i.opt("dragOpacity"),revertDuration:i.opt("dragRevertDuration"),zIndex:2}),l=new Wt(i.coordMap,{distance:5,scroll:i.opt("dragScroll"),listenStart:function(e){u.hide(),u.start(e)},dragStart:function(t){r.triggerSegMouseout(e,t),r.isDraggingSeg=!0,i.hideEvent(o),i.trigger("eventDragStart",s[0],o,t,{})},cellOver:function(t,s){var f=e.cell||l.origCell;n=r.computeEventDrop(f,t,o),n?(i.renderDrag(n,e)?u.hide():u.show(),s&&(n=null)):(u.show(),a())},cellOut:function(){n=null,i.destroyDrag(),u.show(),f()},dragStop:function(e){u.stop(!n,function(){r.isDraggingSeg=!1,i.destroyDrag(),i.showEvent(o),i.trigger("eventDragStop",s[0],o,e,{}),n&&i.reportEventDrop(o,n,s,e)}),f()},listenStop:function(){u.stop()}});l.mousedown(t)},computeEventDrop:function(e,t,n){var r,i,s,o,u,a=e.start,f=t.start;return a.hasTime()===f.hasTime()?(r=w(f,a),i=n.start.clone().add(r),s=null===n.end?null:n.end.clone().add(r),o=n.allDay):(i=f.clone(),s=null,o=!f.hasTime()),u={start:i,end:s,allDay:o},this.view.calendar.isEventRangeAllowed(u,n)?u:null},documentDragStart:function(t,n){var r,i,s=this.view;s.opt("droppable")&&(r=e(t.target),i=s.opt("dropAccept"),(e.isFunction(i)?i.call(r[0],r):r.is(i))&&this.startExternalDrag(r,t,n))},startExternalDrag:function(t,n){var r,i,s=this,o=st(t);r=new Wt(this.coordMap,{cellOver:function(e){i=s.computeExternalDrop(e,o),i?s.renderDrag(i):a()},cellOut:function(){i=null,s.destroyDrag(),f()}}),e(document).one("dragstop",function(e,n){s.destroyDrag(),f(),i&&s.view.reportExternalDrop(o,i,t,e,n)}),r.startDrag(n)},computeExternalDrop:function(e,t){var n={start:e.start.clone(),end:null};return t.startTime&&!n.start.hasTime()&&n.start.time(t.startTime),t.duration&&(n.end=n.start.clone().add(t.duration)),this.view.calendar.isExternalDropRangeAllowed(n,t.eventProps)?n:null},renderDrag:function(){},destroyDrag:function(){},segResizeMousedown:function(e,t){function n(){s.destroyEventResize(),o.showEvent(c),f()}var r,i,s=this,o=this.view,u=o.calendar,l=e.el,c=e.event,h=c.start,p=u.getEventEnd(c);i=new Wt(this.coordMap,{distance:5,scroll:o.opt("dragScroll"),dragStart:function(t){s.triggerSegMouseout(e,t),s.isResizingSeg=!0,o.trigger("eventResizeStart",l[0],c,t,{})},cellOver:function(t){r=t.end,r.isAfter(h)||(r=h.clone().add(w(t.end,t.start))),r.isSame(p)?r=null:u.isEventRangeAllowed({start:h,end:r},c)?(s.renderEventResize({start:h,end:r},e),o.hideEvent(c)):(r=null,a())},cellOut:function(){r=null,n()},dragStop:function(e){s.isResizingSeg=!1,n(),o.trigger("eventResizeStop",l[0],c,e,{}),r&&o.reportEventResize(c,r,l,e)}}),i.mousedown(t)},renderEventResize:function(){},destroyEventResize:function(){},getEventTimeText:function(e,t){return t=t||this.eventTimeFormat,e.end&&this.displayEventEnd?this.view.formatRange(e,t):e.start.format(t)},getSegClasses:function(e,t,n){var r=e.event,i=["fc-event",e.isStart?"fc-start":"fc-not-start",e.isEnd?"fc-end":"fc-not-end"].concat(r.className,r.source?r.source.className:[]);return t&&i.push("fc-draggable"),n&&i.push("fc-resizable"),i},getEventSkinCss:function(e){var t=this.view,n=e.source||{},r=e.color,i=n.color,s=t.opt("eventColor"),o=e.backgroundColor||r||n.backgroundColor||i||t.opt("eventBackgroundColor")||s,u=e.borderColor||r||n.borderColor||i||t.opt("eventBorderColor")||s,a=e.textColor||n.textColor||t.opt("eventTextColor"),f=[];return o&&f.push("background-color:"+o),u&&f.push("border-color:"+u),a&&f.push("color:"+a),f.join(";")},eventsToSegs:function(e,t){var n,r=this.eventsToRanges(e),i=[];for(n=0;r.length>n;n++)i.push.apply(i,this.eventRangeToSegs(r[n],t));return i},eventsToRanges:function(t){var n=this,r=nt(t),i=[];return e.each(r,function(e,t){t.length&&i.push.apply(i,et(t[0])?n.eventsToInverseRanges(t):n.eventsToNormalRanges(t))}),i},eventsToNormalRanges:function(e){var t,n,r,i,s=this.view.calendar,o=[];for(t=0;e.length>t;t++)n=e[t],r=n.start.clone().stripZone(),i=s.getEventEnd(n).stripZone(),o.push({event:n,start:r,end:i,eventStartMS:+r,eventDurationMS:i-r});return o},eventsToInverseRanges:function(e){var t,n,r=this.view,i=r.start.clone().stripZone(),s=r.end.clone().stripZone(),o=this.eventsToNormalRanges(e),u=[],a=e[0],f=i;for(o.sort(rt),t=0;o.length>t;t++)n=o[t],n.start>f&&u.push({event:a,start:f,end:n.start}),f=n.end;return s>f&&u.push({event:a,start:f,end:s}),u},eventRangeToSegs:function(e,t){var n,r,i;for(n=t?t(e):this.rangeToSegs(e),r=0;n.length>r;r++)i=n[r],i.event=e.event,i.eventStartMS=e.eventStartMS,i.eventDurationMS=e.eventDurationMS;return n}}),xt.compareSegs=it,xt.dataAttrPrefix="";var Jt=$t.extend({numbersVisible:!1,bottomCoordPadding:0,breakOnWeeks:null,cellDates:null,dayToCellOffsets:null,rowEls:null,dayEls:null,helperEls:null,render:function(e){var t,n,r,i=this.view,s=this.rowCnt,o=this.colCnt,u=s*o,a="";for(t=0;s>t;t++)a+=this.dayRowHtml(t,e);for(this.el.html(a),this.rowEls=this.el.find(".fc-row"),this.dayEls=this.el.find(".fc-day"),n=0;u>n;n++)r=this.getCell(n),i.trigger("dayRender",null,r.start,this.dayEls.eq(n));$t.prototype.render.call(this)},destroy:function(){this.destroySegPopover(),$t.prototype.destroy.call(this)},dayRowHtml:function(e,t){var n=this.view,r=["fc-row","fc-week",n.widgetContentClass];return t&&r.push("fc-rigid"),'<div class="'+r.join(" ")+'">'+'<div class="fc-bg">'+"<table>"+this.rowHtml("day",e)+"</table>"+"</div>"+'<div class="fc-content-skeleton">'+"<table>"+(this.numbersVisible?"<thead>"+this.rowHtml("number",e)+"</thead>":"")+"</table>"+"</div>"+"</div>"},dayCellHtml:function(e){return this.bgCellHtml(e)},computeColHeadFormat:function(){return this.rowCnt>1?"ddd":this.colCnt>1?this.view.opt("dayOfMonthFormat"):"dddd"},computeEventTimeFormat:function(){return this.view.opt("extraSmallTimeFormat")},computeDisplayEventEnd:function(){return 1==this.colCnt},updateCells:function(){var e,t,n,r;if(this.updateCellDates(),e=this.cellDates,this.breakOnWeeks){for(t=e[0].day(),r=1;e.length>r&&e[r].day()!=t;r++);n=Math.ceil(e.length/r)}else n=1,r=e.length;this.rowCnt=n,this.colCnt=r},updateCellDates:function(){for(var e=this.view,t=this.start.clone(),n=[],r=-1,i=[];t.isBefore(this.end);)e.isHiddenDay(t)?i.push(r+.5):(r++,i.push(r),n.push(t.clone())),t.add(1,"days");this.cellDates=n,this.dayToCellOffsets=i},computeCellRange:function(e){var t=this.colCnt,n=e.row*t+(this.isRTL?t-e.col-1:e.col),r=this.cellDates[n].clone(),i=r.clone().add(1,"day");return{start:r,end:i}},getRowEl:function(e){return this.rowEls.eq(e)},getColEl:function(e){return this.dayEls.eq(e)},getCellDayEl:function(e){return this.dayEls.eq(e.row*this.colCnt+e.col)},computeRowCoords:function(){var e=$t.prototype.computeRowCoords.call(this);return e[e.length-1].bottom+=this.bottomCoordPadding,e},rangeToSegs:function(e){var t,n,r,i,s,o,u,a,f,l,c=this.isRTL,h=this.rowCnt,p=this.colCnt,d=[];for(e=this.view.computeDayRange(e),t=this.dateToCellOffset(e.start),n=this.dateToCellOffset(e.end.subtract(1,"days")),r=0;h>r;r++)i=r*p,s=i+p-1,a=Math.max(i,t),f=Math.min(s,n),a=Math.ceil(a),f=Math.floor(f),f>=a&&(o=a===t,u=f===n,a-=i,f-=i,l={row:r,isStart:o,isEnd:u},c?(l.leftCol=p-f-1,l.rightCol=p-a-1):(l.leftCol=a,l.rightCol=f),d.push(l));return d},dateToCellOffset:function(e){var t=this.dayToCellOffsets,n=e.diff(this.start,"days");return 0>n?t[0]-1:n>=t.length?t[t.length-1]+1:t[n]},renderDrag:function(e,t){var n;return this.renderHighlight(this.view.calendar.ensureVisibleEventRange(e)),t&&!t.el.closest(this.el).length?(this.renderRangeHelper(e,t),n=this.view.opt("dragOpacity"),void 0!==n&&this.helperEls.css("opacity",n),!0):void 0},destroyDrag:function(){this.destroyHighlight(),this.destroyHelper()},renderEventResize:function(e,t){this.renderHighlight(e),this.renderRangeHelper(e,t)},destroyEventResize:function(){this.destroyHighlight(),this.destroyHelper()},renderHelper:function(t,n){var r,i=[],s=this.eventsToSegs([t]);s=this.renderFgSegEls(s),r=this.renderSegRows(s),this.rowEls.each(function(t,s){var o,u=e(s),a=e('<div class="fc-helper-skeleton"><table/></div>');o=n&&n.row===t?n.el.position().top:u.find(".fc-content-skeleton tbody").position().top,a.css("top",o).find("table").append(r[t].tbodyEl),u.append(a),i.push(a[0])}),this.helperEls=e(i)},destroyHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},fillSegTag:"td",renderFill:function(t,n){var r,i,s,o=[];for(n=this.renderFillSegEls(t,n),r=0;n.length>r;r++)i=n[r],s=this.renderFillRow(t,i),this.rowEls.eq(i.row).append(s),o.push(s[0]);return this.elsByFill[t]=e(o),n},renderFillRow:function(t,n){var r,i,s=this.colCnt,o=n.leftCol,u=n.rightCol+1;return r=e('<div class="fc-'+t.toLowerCase()+'-skeleton">'+"<table><tr/></table>"+"</div>"),i=r.find("tr"),o>0&&i.append('<td colspan="'+o+'"/>'),i.append(n.el.attr("colspan",u-o)),s>u&&i.append('<td colspan="'+(s-u)+'"/>'),this.bookendCells(i,t),r}});Jt.mixin({rowStructs:null,destroyEvents:function(){this.destroySegPopover(),$t.prototype.destroyEvents.apply(this,arguments)},getEventSegs:function(){return $t.prototype.getEventSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(t){var n=e.grep(t,function(e){return e.event.allDay});return $t.prototype.renderBgSegs.call(this,n)},renderFgSegs:function(t){var n;return t=this.renderFgSegEls(t),n=this.rowStructs=this.renderSegRows(t),this.rowEls.each(function(t,r){e(r).find(".fc-content-skeleton > table").append(n[t].tbodyEl)}),t},destroyFgSegs:function(){for(var e,t=this.rowStructs||[];e=t.pop();)e.tbodyEl.remove();this.rowStructs=null},renderSegRows:function(e){var t,n,r=[];for(t=this.groupSegRows(e),n=0;t.length>n;n++)r.push(this.renderSegRow(n,t[n]));return r},fgSegHtml:function(e,t){var n,r=this.view,i=e.event,s=r.isEventDraggable(i),o=!t&&i.allDay&&e.isEnd&&r.isEventResizable(i),u=this.getSegClasses(e,s,o),a=this.getEventSkinCss(i),f="";return u.unshift("fc-day-grid-event"),!i.allDay&&e.isStart&&(f='<span class="fc-time">'+_(this.getEventTimeText(i))+"</span>"),n='<span class="fc-title">'+(_(i.title||"")||"&nbsp;")+"</span>",'<a class="'+u.join(" ")+'"'+(i.url?' href="'+_(i.url)+'"':"")+(a?' style="'+a+'"':"")+">"+'<div class="fc-content">'+(this.isRTL?n+" "+f:f+" "+n)+"</div>"+(o?'<div class="fc-resizer"/>':"")+"</a>"},renderSegRow:function(t,n){function r(t){for(;t>o;)l=(g[i-1]||[])[o],l?l.attr("rowspan",parseInt(l.attr("rowspan")||1,10)+1):(l=e("<td/>"),u.append(l)),m[i][o]=l,g[i][o]=l,o++}var i,s,o,u,a,f,l,c=this.colCnt,h=this.buildSegLevels(n),p=Math.max(1,h.length),d=e("<tbody/>"),v=[],m=[],g=[];for(i=0;p>i;i++){if(s=h[i],o=0,u=e("<tr/>"),v.push([]),m.push([]),g.push([]),s)for(a=0;s.length>a;a++){for(f=s[a],r(f.leftCol),l=e('<td class="fc-event-container"/>').append(f.el),f.leftCol!=f.rightCol?l.attr("colspan",f.rightCol-f.leftCol+1):g[i][o]=l;f.rightCol>=o;)m[i][o]=l,v[i][o]=f,o++;u.append(l)}r(c),this.bookendCells(u,"eventSkeleton"),d.append(u)}return{row:t,tbodyEl:d,cellMatrix:m,segMatrix:v,segLevels:h,segs:n}},buildSegLevels:function(e){var t,n,r,i=[];for(e.sort(it),t=0;e.length>t;t++){for(n=e[t],r=0;i.length>r&&ot(n,i[r]);r++);n.level=r,(i[r]||(i[r]=[])).push(n)}for(r=0;i.length>r;r++)i[r].sort(ut);return i},groupSegRows:function(e){var t,n=[];for(t=0;this.rowCnt>t;t++)n.push([]);for(t=0;e.length>t;t++)n[e[t].row].push(e[t]);return n}}),Jt.mixin({segPopover:null,popoverSegs:null,destroySegPopover:function(){this.segPopover&&this.segPopover.hide()},limitRows:function(e){var t,n,r=this.rowStructs||[];for(t=0;r.length>t;t++)this.unlimitRow(t),n=e?"number"==typeof e?e:this.computeRowLevelLimit(t):!1,n!==!1&&this.limitRow(t,n)},computeRowLevelLimit:function(e){var t,n,r=this.rowEls.eq(e),i=r.height(),s=this.rowStructs[e].tbodyEl.children();for(t=0;s.length>t;t++)if(n=s.eq(t).removeClass("fc-limited"),n.position().top+n.outerHeight()>i)return t;return!1},limitRow:function(t,n){function r(r){for(;r>x;)i=w.getCell(t,x),l=w.getCellSegs(i,n),l.length&&(p=o[n-1][x],b=w.renderMoreLink(i,l),y=e("<div/>").append(b),p.append(y),S.push(y[0])),x++}var i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w=this,E=this.rowStructs[t],S=[],x=0;if(n&&E.segLevels.length>n){for(s=E.segLevels[n-1],o=E.cellMatrix,u=E.tbodyEl.children().slice(n).addClass("fc-limited").get(),a=0;s.length>a;a++){for(f=s[a],r(f.leftCol),h=[],c=0;f.rightCol>=x;)i=this.getCell(t,x),l=this.getCellSegs(i,n),h.push(l),c+=l.length,x++;if(c){for(p=o[n-1][f.leftCol],d=p.attr("rowspan")||1,v=[],m=0;h.length>m;m++)g=e('<td class="fc-more-cell"/>').attr("rowspan",d),l=h[m],i=this.getCell(t,f.leftCol+m),b=this.renderMoreLink(i,[f].concat(l)),y=e("<div/>").append(b),g.append(y),v.push(g[0]),S.push(g[0]);p.addClass("fc-limited").after(e(v)),u.push(p[0])}}r(this.colCnt),E.moreEls=e(S),E.limitedEls=e(u)}},unlimitRow:function(e){var t=this.rowStructs[e];t.moreEls&&(t.moreEls.remove(),t.moreEls=null),t.limitedEls&&(t.limitedEls.removeClass("fc-limited"),t.limitedEls=null)},renderMoreLink:function(t,n){var r=this,i=this.view;return e('<a class="fc-more"/>').text(this.getMoreLinkText(n.length)).on("click",function(s){var o=i.opt("eventLimitClick"),u=t.start,a=e(this),f=r.getCellDayEl(t),l=r.getCellSegs(t),c=r.resliceDaySegs(l,u),h=r.resliceDaySegs(n,u);"function"==typeof o&&(o=i.trigger("eventLimitClick",null,{date:u,dayEl:f,moreEl:a,segs:c,hiddenSegs:h},s)),"popover"===o?r.showSegPopover(t,a,c):"string"==typeof o&&i.calendar.zoomTo(u,o)})},showSegPopover:function(e,t,n){var r,i,s=this,o=this.view,u=t.parent();r=1==this.rowCnt?o.el:this.rowEls.eq(e.row),i={className:"fc-more-popover",content:this.renderSegPopoverContent(e,n),parentEl:this.el,top:r.offset().top,autoHide:!0,viewportConstrain:o.opt("popoverViewportConstrain"),hide:function(){s.segPopover.destroy(),s.segPopover=null,s.popoverSegs=null}},this.isRTL?i.right=u.offset().left+u.outerWidth()+1:i.left=u.offset().left-1,this.segPopover=new Rt(i),this.segPopover.show()},renderSegPopoverContent:function(t,n){var r,i=this.view,s=i.opt("theme"),o=t.start.format(i.opt("dayPopoverFormat")),u=e('<div class="fc-header '+i.widgetHeaderClass+'">'+'<span class="fc-close '+(s?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span>'+'<span class="fc-title">'+_(o)+"</span>"+'<div class="fc-clear"/>'+"</div>"+'<div class="fc-body '+i.widgetContentClass+'">'+'<div class="fc-event-container"></div>'+"</div>"),a=u.find(".fc-event-container");for(n=this.renderFgSegEls(n,!0),this.popoverSegs=n,r=0;n.length>r;r++)n[r].cell=t,a.append(n[r].el);return u},resliceDaySegs:function(t,n){var r=e.map(t,function(e){return e.event}),i=n.clone().stripTime(),s=i.clone().add(1,"days"),o={start:i,end:s};return this.eventsToSegs(r,function(e){var t=y(e,o);return t?[t]:[]})},getMoreLinkText:function(e){var t=this.view.opt("eventLimitText");return"function"==typeof t?t(e):"+"+e+" "+t},getCellSegs:function(e,t){for(var n,r=this.rowStructs[e.row].segMatrix,i=t||0,s=[];r.length>i;)n=r[i][e.col],n&&s.push(n),i++;return s}});var Kt=$t.extend({slotDuration:null,snapDuration:null,minTime:null,maxTime:null,axisFormat:null,dayEls:null,slatEls:null,slatTops:null,helperEl:null,businessHourSegs:null,constructor:function(){$t.apply(this,arguments),this.processOptions()},render:function(){this.el.html(this.renderHtml()),this.dayEls=this.el.find(".fc-day"),this.slatEls=this.el.find(".fc-slats tr"),this.computeSlatTops(),this.renderBusinessHours(),$t.prototype.render.call(this)},renderBusinessHours:function(){var e=this.view.calendar.getBusinessHoursEvents();this.businessHourSegs=this.renderFill("businessHours",this.eventsToSegs(e),"bgevent")},renderHtml:function(){return'<div class="fc-bg"><table>'+this.rowHtml("slotBg")+"</table>"+"</div>"+'<div class="fc-slats">'+"<table>"+this.slatRowHtml()+"</table>"+"</div>"},slotBgCellHtml:function(e){return this.bgCellHtml(e)},slatRowHtml:function(){for(var e,n,r,i=this.view,s=this.isRTL,o="",u=0===this.slotDuration.asMinutes()%15,a=t.duration(+this.minTime);this.maxTime>a;)e=this.start.clone().time(a),n=e.minutes(),r='<td class="fc-axis fc-time '+i.widgetContentClass+'" '+i.axisStyleAttr()+">"+(u&&n?"":"<span>"+_(e.format(this.axisFormat))+"</span>")+"</td>",o+="<tr "+(n?'class="fc-minor"':"")+">"+(s?"":r)+'<td class="'+i.widgetContentClass+'"/>'+(s?r:"")+"</tr>",a.add(this.slotDuration);return o},processOptions:function(){var e=this.view,n=e.opt("slotDuration"),r=e.opt("snapDuration");n=t.duration(n),r=r?t.duration(r):n,this.slotDuration=n,this.snapDuration=r,this.minTime=t.duration(e.opt("minTime")),this.maxTime=t.duration(e.opt("maxTime")),this.axisFormat=e.opt("axisFormat")||e.opt("smallTimeFormat")},computeColHeadFormat:function(){return this.colCnt>1?this.view.opt("dayOfMonthFormat"):"dddd"},computeEventTimeFormat:function(){return this.view.opt("noMeridiemTimeFormat")},computeDisplayEventEnd:function(){return!0},updateCells:function(){var e,t=this.view,n=[];for(e=this.start.clone();e.isBefore(this.end);)n.push({day:e.clone()}),e.add(1,"day"),e=t.skipHiddenDays(e);this.isRTL&&n.reverse(),this.colData=n,this.colCnt=n.length,this.rowCnt=Math.ceil((this.maxTime-this.minTime)/this.snapDuration)},computeCellRange:function(e){var t=this.computeSnapTime(e.row),n=this.view.calendar.rezoneDate(e.day).time(t),r=n.clone().add(this.snapDuration);return{start:n,end:r}},getColEl:function(e){return this.dayEls.eq(e)},computeSnapTime:function(e){return t.duration(this.minTime+this.snapDuration*e)},rangeToSegs:function(e){var t,n,r,i,s=this.colCnt,o=[];for(e={start:e.start.clone().stripZone(),end:e.end.clone().stripZone()},n=0;s>n;n++)r=this.colData[n].day,i={start:r.clone().time(this.minTime),end:r.clone().time(this.maxTime)},t=y(e,i),t&&(t.col=n,o.push(t));return o},resize:function(){this.computeSlatTops(),this.updateSegVerticals()},computeRowCoords:function(){var e,t,n=this.el.offset().top,r=[];for(e=0;this.rowCnt>e;e++)t={top:n+this.computeTimeTop(this.computeSnapTime(e))},e>0&&(r[e-1].bottom=t.top),r.push(t);return t.bottom=t.top+this.computeTimeTop(this.computeSnapTime(e)),r},computeDateTop:function(e,n){return this.computeTimeTop(t.duration(e.clone().stripZone()-n.clone().stripTime()))},computeTimeTop:function(e){var t,n,r,i,s=(e-this.minTime)/this.slotDuration;return s=Math.max(0,s),s=Math.min(this.slatEls.length,s),t=Math.floor(s),n=s-t,r=this.slatTops[t],n?(i=this.slatTops[t+1],r+(i-r)*n):r},computeSlatTops:function(){var t,n=[];this.slatEls.each(function(r,i){t=e(i).position().top,n.push(t)}),n.push(t+this.slatEls.last().outerHeight()),this.slatTops=n},renderDrag:function(e,t){var n;return t?(this.renderRangeHelper(e,t),n=this.view.opt("dragOpacity"),void 0!==n&&this.helperEl.css("opacity",n),!0):(this.renderHighlight(this.view.calendar.ensureVisibleEventRange(e)),void 0)},destroyDrag:function(){this.destroyHelper(),this.destroyHighlight()},renderEventResize:function(e,t){this.renderRangeHelper(e,t)},destroyEventResize:function(){this.destroyHelper()},renderHelper:function(t,n){var r,i,s,o,u=this.eventsToSegs([t]);for(u=this.renderFgSegEls(u),r=this.renderSegTable(u),i=0;u.length>i;i++)s=u[i],n&&n.col===s.col&&(o=n.el,s.el.css({left:o.css("left"),right:o.css("right"),"margin-left":o.css("margin-left"),"margin-right":o.css("margin-right")}));this.helperEl=e('<div class="fc-helper-skeleton"/>').append(r).appendTo(this.el)},destroyHelper:function(){this.helperEl&&(this.helperEl.remove(),this.helperEl=null)},renderSelection:function(e){this.view.opt("selectHelper")?this.renderRangeHelper(e):this.renderHighlight(e)},destroySelection:function(){this.destroyHelper(),this.destroyHighlight()},renderFill:function(t,n,r){var i,s,o,u,a,f,l,c,h,p;if(n.length){for(n=this.renderFillSegEls(t,n),i=this.groupSegCols(n),r=r||t.toLowerCase(),s=e('<div class="fc-'+r+'-skeleton">'+"<table><tr/></table>"+"</div>"),o=s.find("tr"),u=0;i.length>u;u++)if(a=i[u],f=e("<td/>").appendTo(o),a.length)for(l=e('<div class="fc-'+r+'-container"/>').appendTo(f),c=this.colData[u].day,h=0;a.length>h;h++)p=a[h],l.append(p.el.css({top:this.computeDateTop(p.start,c),bottom:-this.computeDateTop(p.end,c)}));this.bookendCells(o,t),this.el.append(s),this.elsByFill[t]=s}return n}});Kt.mixin({eventSkeletonEl:null,renderFgSegs:function(t){return t=this.renderFgSegEls(t),this.el.append(this.eventSkeletonEl=e('<div class="fc-content-skeleton"/>').append(this.renderSegTable(t))),t},destroyFgSegs:function(){this.eventSkeletonEl&&(this.eventSkeletonEl.remove(),this.eventSkeletonEl=null)},renderSegTable:function(t){var n,r,i,s,o,u,a=e("<table><tr/></table>"),f=a.find("tr");for(n=this.groupSegCols(t),this.computeSegVerticals(t),s=0;n.length>s;s++){for(o=n[s],at(o),u=e('<div class="fc-event-container"/>'),r=0;o.length>r;r++)i=o[r],i.el.css(this.generateSegPositionCss(i)),30>i.bottom-i.top&&i.el.addClass("fc-short"),u.append(i.el);f.append(e("<td/>").append(u))}return this.bookendCells(f,"eventSkeleton"),a},updateSegVerticals:function(){var e,t=(this.segs||[]).concat(this.businessHourSegs||[]);for(this.computeSegVerticals(t),e=0;t.length>e;e++)t[e].el.css(this.generateSegVerticalCss(t[e]))},computeSegVerticals:function(e){var t,n;for(t=0;e.length>t;t++)n=e[t],n.top=this.computeDateTop(n.start,n.start),n.bottom=this.computeDateTop(n.end,n.start)},fgSegHtml:function(e,t){var n,r,i,s=this.view,o=e.event,u=s.isEventDraggable(o),a=!t&&e.isEnd&&s.isEventResizable(o),f=this.getSegClasses(e,u,a),l=this.getEventSkinCss(o);return f.unshift("fc-time-grid-event"),s.isMultiDayEvent(o)?(e.isStart||e.isEnd)&&(n=this.getEventTimeText(e),r=this.getEventTimeText(e,"LT"),i=this.getEventTimeText({start:e.start})):(n=this.getEventTimeText(o),r=this.getEventTimeText(o,"LT"),i=this.getEventTimeText({start:o.start})),'<a class="'+f.join(" ")+'"'+(o.url?' href="'+_(o.url)+'"':"")+(l?' style="'+l+'"':"")+">"+'<div class="fc-content">'+(n?'<div class="fc-time" data-start="'+_(i)+'"'+' data-full="'+_(r)+'"'+">"+"<span>"+_(n)+"</span>"+"</div>":"")+(o.title?'<div class="fc-title">'+_(o.title)+"</div>":"")+"</div>"+'<div class="fc-bg"/>'+(a?'<div class="fc-resizer"/>':"")+"</a>"},generateSegPositionCss:function(e){var t,n,r=this.view.opt("slotEventOverlap"),i=e.backwardCoord,s=e.forwardCoord,o=this.generateSegVerticalCss(e);return r&&(s=Math.min(1,i+2*(s-i))),this.isRTL?(t=1-s,n=i):(t=i,n=1-s),o.zIndex=e.level+1,o.left=100*t+"%",o.right=100*n+"%",r&&e.forwardPressure&&(o[this.isRTL?"marginLeft":"marginRight"]=20),o},generateSegVerticalCss:function(e){return{top:e.top,bottom:-e.bottom}},groupSegCols:function(e){var t,n=[];for(t=0;this.colCnt>t;t++)n.push([]);for(t=0;e.length>t;t++)n[e[t].col].push(e[t]);return n}});var Qt=xt.View=G.extend({type:null,name:null,calendar:null,options:null,coordMap:null,el:null,start:null,end:null,intervalStart:null,intervalEnd:null,intervalDuration:null,intervalUnit:null,isSelected:!1,scrollerEl:null,scrollTop:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,nextDayThreshold:null,isHiddenDayHash:null,documentMousedownProxy:null,constructor:function(n,r,i){this.calendar=n,this.options=r,this.type=this.name=i,this.nextDayThreshold=t.duration(this.opt("nextDayThreshold")),this.initTheming(),this.initHiddenDays(),this.documentMousedownProxy=e.proxy(this,"documentMousedown"),this.initialize()},initialize:function(){},opt:function(t){var n;return n=this.options[t],void 0!==n?n:(n=this.calendar.options[t],e.isPlainObject(n)&&!i(t)?b(n,this.type):n)},trigger:function(e,t){var n=this.calendar;return n.trigger.apply(n,[e,t||this].concat(Array.prototype.slice.call(arguments,2),[this]))},setDate:function(e){this.setRange(this.computeRange(e))},setRange:function(t){e.extend(this,t)},computeRange:function(e){var n,r,i=t.duration(this.opt("duration")||this.constructor.duration||{days:1}),s=S(i),o=e.clone().startOf(s),u=o.clone().add(i);return x("days",i)?(o.stripTime(),u.stripTime()):(o.hasTime()||(o=this.calendar.rezoneDate(o)),u.hasTime()||(u=this.calendar.rezoneDate(u))),n=o.clone(),n=this.skipHiddenDays(n),r=u.clone(),r=this.skipHiddenDays(r,-1,!0),{intervalDuration:i,intervalUnit:s,intervalStart:o,intervalEnd:u,start:n,end:r}},computePrevDate:function(e){return this.skipHiddenDays(e.clone().startOf(this.intervalUnit).subtract(this.intervalDuration),-1)},computeNextDate:function(e){return this.skipHiddenDays(e.clone().startOf(this.intervalUnit).add(this.intervalDuration))},computeTitle:function(){return this.formatRange({start:this.intervalStart,end:this.intervalEnd},this.opt("titleFormat")||this.computeTitleFormat(),this.opt("titleRangeSeparator"))},computeTitleFormat:function(){return"year"==this.intervalUnit?"YYYY":"month"==this.intervalUnit?this.opt("monthYearFormat"):this.intervalDuration.as("days")>1?"ll":"LL"},formatRange:function(e,t,n){var r=e.end;return r.hasTime()||(r=r.clone().subtract(1)),V(e.start,r,t,n,this.opt("isRTL"))},renderView:function(){this.render(),this.updateSize(),this.initializeScroll(),this.trigger("viewRender",this,this,this.el),e(document).on("mousedown",this.documentMousedownProxy)},render:function(){},destroyView:function(){this.unselect(),this.destroyViewEvents(),this.destroy(),this.trigger("viewDestroy",this,this,this.el),e(document).off("mousedown",this.documentMousedownProxy)},destroy:function(){this.el.empty()},initTheming:function(){var e=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=e+"-widget-header",this.widgetContentClass=e+"-widget-content",this.highlightStateClass=e+"-state-highlight"},updateSize:function(e){e&&this.recordScroll(),this.updateHeight(),this.updateWidth()},updateWidth:function(){},updateHeight:function(){var e=this.calendar;this.setHeight(e.getSuggestedViewHeight(),e.isHeightAuto())},setHeight:function(){},computeScrollerHeight:function(e,t){var n,r;return t=t||this.scrollerEl,n=this.el.add(t),n.css({position:"relative",left:-1}),r=this.el.outerHeight()-t.height(),n.css({position:"",left:""}),e-r},initializeScroll:function(){},recordScroll:function(){this.scrollerEl&&(this.scrollTop=this.scrollerEl.scrollTop())},restoreScroll:function(){null!==this.scrollTop&&this.scrollerEl.scrollTop(this.scrollTop)},renderViewEvents:function(e){this.renderEvents(e),this.eventSegEach(function(e){this.trigger("eventAfterRender",e.event,e.event,e.el)}),this.trigger("eventAfterAllRender")},renderEvents:function(){},destroyViewEvents:function(){this.eventSegEach(function(e){this.trigger("eventDestroy",e.event,e.event,e.el)}),this.destroyEvents()},destroyEvents:function(){},resolveEventEl:function(t,n){var r=this.trigger("eventRender",t,t,n);return r===!1?n=null:r&&r!==!0&&(n=e(r)),n},showEvent:function(e){this.eventSegEach(function(e){e.el.css("visibility","")},e)},hideEvent:function(e){this.eventSegEach(function(e){e.el.css("visibility","hidden")},e)},eventSegEach:function(e,t){var n,r=this.getEventSegs();for(n=0;r.length>n;n++)t&&r[n].event._id!==t._id||e.call(this,r[n])},getEventSegs:function(){return[]},isEventDraggable:function(e){var t=e.source||{};return M(e.startEditable,t.startEditable,this.opt("eventStartEditable"),e.editable,t.editable,this.opt("editable"))},reportEventDrop:function(e,t,n,r){var i=this.calendar,s=i.mutateEvent(e,t),o=function(){s.undo(),i.reportEventChange()};this.triggerEventDrop(e,s.dateDelta,o,n,r),i.reportEventChange()},triggerEventDrop:function(e,t,n,r,i){this.trigger("eventDrop",r[0],e,t,n,i,{})},reportExternalDrop:function(t,n,r,i,s){var o,u,a=t.eventProps;a&&(o=e.extend({},a,n),u=this.calendar.renderEvent(o,t.stick)[0]),this.triggerExternalDrop(u,n,r,i,s)},triggerExternalDrop:function(e,t,n,r,i){this.trigger("drop",n[0],t.start,r,i),e&&this.trigger("eventReceive",null,e)},renderDrag:function(){},destroyDrag:function(){},isEventResizable:function(e){var t=e.source||{};return M(e.durationEditable,t.durationEditable,this.opt("eventDurationEditable"),e.editable,t.editable,this.opt("editable"))},reportEventResize:function(e,t,n,r){var i=this.calendar,s=i.mutateEvent(e,{end:t}),o=function(){s.undo(),i.reportEventChange()};this.triggerEventResize(e,s.durationDelta,o,n,r),i.reportEventChange()},triggerEventResize:function(e,t,n,r,i){this.trigger("eventResize",r[0],e,t,n,i,{})},select:function(e,t){this.unselect(t),this.renderSelection(e),this.reportSelection(e,t)},renderSelection:function(){},reportSelection:function(e,t){this.isSelected=!0,this.trigger("select",null,e.start,e.end,t)},unselect:function(e){this.isSelected&&(this.isSelected=!1,this.destroySelection(),this.trigger("unselect",null,e))},destroySelection:function(){},documentMousedown:function(t){var n;this.isSelected&&this.opt("unselectAuto")&&g(t)&&(n=this.opt("unselectCancel"),n&&e(t.target).closest(n).length||this.unselect(t))},initHiddenDays:function(){var t,n=this.opt("hiddenDays")||[],r=[],i=0;for(this.opt("weekends")===!1&&n.push(0,6),t=0;7>t;t++)(r[t]=-1!==e.inArray(t,n))||i++;if(!i)throw"invalid hiddenDays";this.isHiddenDayHash=r},isHiddenDay:function(e){return t.isMoment(e)&&(e=e.day()),this.isHiddenDayHash[e]},skipHiddenDays:function(e,t,n){var r=e.clone();for(t=t||1;this.isHiddenDayHash[(r.day()+(n?t:0)+7)%7];)r.add(t,"days");return r},computeDayRange:function(e){var t,n=e.start.clone().stripTime(),r=e.end,i=null;return r&&(i=r.clone().stripTime(),t=+r.time(),t&&t>=this.nextDayThreshold&&i.add(1,"days")),(!r||n>=i)&&(i=n.clone().add(1,"days")),{start:n,end:i}},isMultiDayEvent:function(e){var t=this.computeDayRange(e);return t.end.diff(t.start,"days")>1}});xt.sourceNormalizers=[],xt.sourceFetchers=[];var Gt={dataType:"json",cache:!1},Yt=1,Zt=Tt.basic=Qt.extend({dayGrid:null,dayNumbersVisible:!1,weekNumbersVisible:!1,weekNumberWidth:null,headRowEl:null,initialize:function(){this.dayGrid=new Jt(this),this.coordMap=this.dayGrid.coordMap},setRange:function(e){Qt.prototype.setRange.call(this,e),this.dayGrid.breakOnWeeks=/year|month|week/.test(this.intervalUnit),this.dayGrid.setRange(e)},computeRange:function(e){var t=Qt.prototype.computeRange.call(this,e);return/year|month/.test(t.intervalUnit)&&(t.start.startOf("week"),t.start=this.skipHiddenDays(t.start),t.end.weekday()&&(t.end.add(1,"week").startOf("week"),t.end=this.skipHiddenDays(t.end,-1,!0))),t},render:function(){this.dayNumbersVisible=this.dayGrid.rowCnt>1,this.weekNumbersVisible=this.opt("weekNumbers"),this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible,this.el.addClass("fc-basic-view").html(this.renderHtml()),this.headRowEl=this.el.find("thead .fc-row"),this.scrollerEl=this.el.find(".fc-day-grid-container"),this.dayGrid.coordMap.containerEl=this.scrollerEl,this.dayGrid.el=this.el.find(".fc-day-grid"),this.dayGrid.render(this.hasRigidRows())},destroy:function(){this.dayGrid.destroy(),Qt.prototype.destroy.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.dayGrid.headHtml()+"</td>"+"</tr>"+"</thead>"+"<tbody>"+"<tr>"+'<td class="'+this.widgetContentClass+'">'+'<div class="fc-day-grid-container">'+'<div class="fc-day-grid"/>'+"</div>"+"</td>"+"</tr>"+"</tbody>"+"</table>"},headIntroHtml:function(){return this.weekNumbersVisible?'<th class="fc-week-number '+this.widgetHeaderClass+'" '+this.weekNumberStyleAttr()+">"+"<span>"+_(this.opt("weekNumberTitle"))+"</span>"+"</th>":void 0},numberIntroHtml:function(e){return this.weekNumbersVisible?'<td class="fc-week-number" '+this.weekNumberStyleAttr()+">"+"<span>"+this.calendar.calculateWeekNumber(this.dayGrid.getCell(e,0).start)+"</span>"+"</td>":void 0},dayIntroHtml:function(){return this.weekNumbersVisible?'<td class="fc-week-number '+this.widgetContentClass+'" '+this.weekNumberStyleAttr()+"></td>":void 0},introHtml:function(){return this.weekNumbersVisible?'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"></td>":void 0},numberCellHtml:function(e){var t,n=e.start;return this.dayNumbersVisible?(t=this.dayGrid.getDayClasses(n),t.unshift("fc-day-number"),'<td class="'+t.join(" ")+'" data-date="'+n.format()+'">'+n.date()+"</td>"):"<td/>"},weekNumberStyleAttr:function(){return null!==this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},hasRigidRows:function(){var e=this.opt("eventLimit");return e&&"number"!=typeof e},updateWidth:function(){this.weekNumbersVisible&&(this.weekNumberWidth=h(this.el.find(".fc-week-number")))},setHeight:function(e,t){var n,r=this.opt("eventLimit");d(this.scrollerEl),u(this.headRowEl),this.dayGrid.destroySegPopover(),r&&"number"==typeof r&&this.dayGrid.limitRows(r),n=this.computeScrollerHeight(e),this.setGridHeight(n,t),r&&"number"!=typeof r&&this.dayGrid.limitRows(r),!t&&p(this.scrollerEl,n)&&(o(this.headRowEl,m(this.scrollerEl)),n=this.computeScrollerHeight(e),this.scrollerEl.height(n),this.restoreScroll())},setGridHeight:function(e,t){t?c(this.dayGrid.rowEls):l(this.dayGrid.rowEls,e,!0)},renderEvents:function(e){this.dayGrid.renderEvents(e),this.updateHeight()},getEventSegs:function(){return this.dayGrid.getEventSegs()},destroyEvents:function(){this.recordScroll(),this.dayGrid.destroyEvents()},renderDrag:function(e,t){return this.dayGrid.renderDrag(e,t)},destroyDrag:function(){this.dayGrid.destroyDrag()},renderSelection:function(e){this.dayGrid.renderSelection(e)},destroySelection:function(){this.dayGrid.destroySelection()}});n({fixedWeekCount:!0});var en=Tt.month=Zt.extend({computeRange:function(e){var t=Zt.prototype.computeRange.call(this,e);return this.isFixedWeeks()&&t.end.add(6-t.end.diff(t.start,"weeks"),"weeks"),t},setGridHeight:function(e,t){t=t||"variable"===this.opt("weekMode"),t&&(e*=this.rowCnt/6),l(this.dayGrid.rowEls,e,!t)},isFixedWeeks:function(){var e=this.opt("weekMode");return e?"fixed"===e:this.opt("fixedWeekCount")}});en.duration={months:1},Tt.basicWeek={type:"basic",duration:{weeks:1}},Tt.basicDay={type:"basic",duration:{days:1}},n({allDaySlot:!0,allDayText:"all-day",scrollTime:"06:00:00",slotDuration:"00:30:00",minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0});var tn=5;Tt.agenda=Qt.extend({timeGrid:null,dayGrid:null,axisWidth:null,noScrollRowEls:null,bottomRuleEl:null,bottomRuleHeight:null,initialize:function(){this.timeGrid=new Kt(this),this.opt("allDaySlot")?(this.dayGrid=new Jt(this),this.coordMap=new zt([this.dayGrid.coordMap,this.timeGrid.coordMap])):this.coordMap=this.timeGrid.coordMap},setRange:function(e){Qt.prototype.setRange.call(this,e),this.timeGrid.setRange(e),this.dayGrid&&this.dayGrid.setRange(e)},render:function(){this.el.addClass("fc-agenda-view").html(this.renderHtml()),this.scrollerEl=this.el.find(".fc-time-grid-container"),this.timeGrid.coordMap.containerEl=this.scrollerEl,this.timeGrid.el=this.el.find(".fc-time-grid"),this.timeGrid.render(),this.bottomRuleEl=e('<hr class="'+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el),this.dayGrid&&(this.dayGrid.el=this.el.find(".fc-day-grid"),this.dayGrid.render(),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()),this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)")},destroy:function(){this.timeGrid.destroy(),this.dayGrid&&this.dayGrid.destroy(),Qt.prototype.destroy.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.timeGrid.headHtml()+"</td>"+"</tr>"+"</thead>"+"<tbody>"+"<tr>"+'<td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="'+this.widgetHeaderClass+'"/>':"")+'<div class="fc-time-grid-container">'+'<div class="fc-time-grid"/>'+"</div>"+"</td>"+"</tr>"+"</tbody>"+"</table>"},headIntroHtml:function(){var e,t,n,r;return this.opt("weekNumbers")?(e=this.timeGrid.getCell(0).start,t=this.calendar.calculateWeekNumber(e),n=this.opt("weekNumberTitle"),r=this.opt("isRTL")?t+n:n+t,'<th class="fc-axis fc-week-number '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+">"+"<span>"+_(r)+"</span>"+"</th>"):'<th class="fc-axis '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"></th>"},dayIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+">"+"<span>"+(this.opt("allDayHtml")||_(this.opt("allDayText")))+"</span>"+"</td>"},slotBgIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"></td>"},introHtml:function(){return'<td class="fc-axis" '+this.axisStyleAttr()+"></td>"},axisStyleAttr:function(){return null!==this.axisWidth?'style="width:'+this.axisWidth+'px"':""},updateSize:function(e){e&&this.timeGrid.resize(),Qt.prototype.updateSize.call(this,e)},updateWidth:function(){this.axisWidth=h(this.el.find(".fc-axis"))},setHeight:function(e,t){var n,r;null===this.bottomRuleHeight&&(this.bottomRuleHeight=this.bottomRuleEl.outerHeight()),this.bottomRuleEl.hide(),this.scrollerEl.css("overflow",""),d(this.scrollerEl),u(this.noScrollRowEls),this.dayGrid&&(this.dayGrid.destroySegPopover(),n=this.opt("eventLimit"),n&&"number"!=typeof n&&(n=tn),n&&this.dayGrid.limitRows(n)),t||(r=this.computeScrollerHeight(e),p(this.scrollerEl,r)?(o(this.noScrollRowEls,m(this.scrollerEl)),r=this.computeScrollerHeight(e),this.scrollerEl.height(r),this.restoreScroll()):(this.scrollerEl.height(r).css("overflow","hidden"),this.bottomRuleEl.show()))},initializeScroll:function(){function e(){n.scrollerEl.scrollTop(i)}var n=this,r=t.duration(this.opt("scrollTime")),i=this.timeGrid.computeTimeTop(r);i=Math.ceil(i),i&&i++,e(),setTimeout(e,0)},renderEvents:function(e){var t,n,r=[],i=[],s=[];for(n=0;e.length>n;n++)e[n].allDay?r.push(e[n]):i.push(e[n]);t=this.timeGrid.renderEvents(i),this.dayGrid&&(s=this.dayGrid.renderEvents(r)),this.updateHeight()},getEventSegs:function(){return this.timeGrid.getEventSegs().concat(this.dayGrid?this.dayGrid.getEventSegs():[])},destroyEvents:function(){this.recordScroll(),this.timeGrid.destroyEvents(),this.dayGrid&&this.dayGrid.destroyEvents()},renderDrag:function(e,t){return e.start.hasTime()?this.timeGrid.renderDrag(e,t):this.dayGrid?this.dayGrid.renderDrag(e,t):void 0},destroyDrag:function(){this.timeGrid.destroyDrag(),this.dayGrid&&this.dayGrid.destroyDrag()},renderSelection:function(e){e.start.hasTime()||e.end.hasTime()?this.timeGrid.renderSelection(e):this.dayGrid&&this.dayGrid.renderSelection(e)},destroySelection:function(){this.timeGrid.destroySelection(),this.dayGrid&&this.dayGrid.destroySelection()}}),Tt.agendaWeek={type:"agenda",duration:{weeks:1}},Tt.agendaDay={type:"agenda",duration:{days:1}}});