/*! FixedColumns 3.0.4
 * Â©2010-2014 SpryMedia Ltd - datatables.net/license
 */

/**
 * @summary     FixedColumns
 * @description Freeze columns in place on a scrolling DataTable
 * @version     3.0.4
 * @file        dataTables.fixedColumns.js
 * @author      SpryMedia Ltd (www.sprymedia.co.uk)
 * @contact     www.sprymedia.co.uk/contact
 * @copyright   Copyright 2010-2014 SpryMedia Ltd.
 *
 * This source file is free software, available under the following license:
 *   MIT license - http://datatables.net/license/mit
 *
 * This source file is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 * or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.
 *
 * For details please refer to: http://www.datatables.net
 */

(function(e,t,n){var r=function(r,i){"use strict";var s=function(e,t){var n=this;if(!(this instanceof s)){alert("FixedColumns warning: FixedColumns must be initialised with the 'new' keyword.");return}typeof t=="undefined"&&(t={});var i=r.fn.dataTable.camelToHungarian;i&&(i(s.defaults,s.defaults,!0),i(s.defaults,t));var o=r.fn.dataTable.Api?(new r.fn.dataTable.Api(e)).settings()[0]:e.fnSettings();this.s={dt:o,iTableColumns:o.aoColumns.length,aiOuterWidths:[],aiInnerWidths:[]},this.dom={scroller:null,header:null,body:null,footer:null,grid:{wrapper:null,dt:null,left:{wrapper:null,head:null,body:null,foot:null},right:{wrapper:null,head:null,body:null,foot:null}},clone:{left:{header:null,body:null,footer:null},right:{header:null,body:null,footer:null}}},o._oFixedColumns=this,o._bInitComplete?this._fnConstruct(t):o.oApi._fnCallbackReg(o,"aoInitComplete",function(){n._fnConstruct(t)},"FixedColumns")};return s.prototype={fnUpdate:function(){this._fnDraw(!0)},fnRedrawLayout:function(){this._fnColCalc(),this._fnGridLayout(),this.fnUpdate()},fnRecalculateHeight:function(e){delete e._DTTC_iHeight,e.style.height="auto"},fnSetRowHeight:function(e,t){e.style.height=t+"px"},fnGetPosition:function(e){var t,n=this.s.dt.oInstance;if(!r(e).parents(".DTFC_Cloned").length)return n.fnGetPosition(e);if(e.nodeName.toLowerCase()==="tr")return t=r(e).index(),n.fnGetPosition(r("tr",this.s.dt.nTBody)[t]);var i=r(e).index();t=r(e.parentNode).index();var s=n.fnGetPosition(r("tr",this.s.dt.nTBody)[t]);return[s,i,n.oApi._fnVisibleToColumnIndex(this.s.dt,i)]},_fnConstruct:function(n){var i,o,u,a=this;if(typeof this.s.dt.oInstance.fnVersionCheck!="function"||this.s.dt.oInstance.fnVersionCheck("1.8.0")!==!0){alert("FixedColumns "+s.VERSION+" required DataTables 1.8.0 or later. "+"Please upgrade your DataTables installation");return}if(this.s.dt.oScroll.sX===""){this.s.dt.oInstance.oApi._fnLog(this.s.dt,1,"FixedColumns is not needed (no x-scrolling in DataTables enabled), so no action will be taken. Use 'FixedHeader' for column fixing when scrolling is not enabled");return}this.s=r.extend(!0,this.s,s.defaults,n);var f=this.s.dt.oClasses;this.dom.grid.dt=r(this.s.dt.nTable).parents("div."+f.sScrollWrapper)[0],this.dom.scroller=r("div."+f.sScrollBody,this.dom.grid.dt)[0],this._fnColCalc(),this._fnGridSetup();var l;r(this.dom.scroller).on("mouseover.DTFC touchstart.DTFC",function(){l="main"}).on("scroll.DTFC",function(){l==="main"&&(a.s.iLeftColumns>0&&(a.dom.grid.left.liner.scrollTop=a.dom.scroller.scrollTop),a.s.iRightColumns>0&&(a.dom.grid.right.liner.scrollTop=a.dom.scroller.scrollTop))});var c="onwheel"in t.createElement("div")?"wheel.DTFC":"mousewheel.DTFC";a.s.iLeftColumns>0&&r(a.dom.grid.left.liner).on("mouseover.DTFC touchstart.DTFC",function(){l="left"}).on("scroll.DTFC",function(){l==="left"&&(a.dom.scroller.scrollTop=a.dom.grid.left.liner.scrollTop,a.s.iRightColumns>0&&(a.dom.grid.right.liner.scrollTop=a.dom.grid.left.liner.scrollTop))}).on(c,function(e){var t=e.type==="wheel"?-e.originalEvent.deltaX:e.originalEvent.wheelDeltaX;a.dom.scroller.scrollLeft-=t}),a.s.iRightColumns>0&&r(a.dom.grid.right.liner).on("mouseover.DTFC touchstart.DTFC",function(){l="right"}).on("scroll.DTFC",function(){l==="right"&&(a.dom.scroller.scrollTop=a.dom.grid.right.liner.scrollTop,a.s.iLeftColumns>0&&(a.dom.grid.left.liner.scrollTop=a.dom.grid.right.liner.scrollTop))}).on(c,function(e){var t=e.type==="wheel"?-e.originalEvent.deltaX:e.originalEvent.wheelDeltaX;a.dom.scroller.scrollLeft-=t}),r(e).on("resize.DTFC",function(){a._fnGridLayout.call(a)});var h=!0,p=r(this.s.dt.nTable);p.on("draw.dt.DTFC",function(){a._fnDraw.call(a,h),h=!1}).on("column-sizing.dt.DTFC",function(){a._fnColCalc(),a._fnGridLayout(a)}).on("column-visibility.dt.DTFC",function(){a._fnColCalc(),a._fnGridLayout(a),a._fnDraw(!0)}).on("destroy.dt.DTFC",function(){p.off("column-sizing.dt.DTFC destroy.dt.DTFC draw.dt.DTFC"),r(a.dom.scroller).off("scroll.DTFC mouseover.DTFC"),r(e).off("resize.DTFC"),r(a.dom.grid.left.liner).off("scroll.DTFC mouseover.DTFC "+c),r(a.dom.grid.left.wrapper).remove(),r(a.dom.grid.right.liner).off("scroll.DTFC mouseover.DTFC "+c),r(a.dom.grid.right.wrapper).remove()}),this._fnGridLayout(),this.s.dt.oInstance.fnDraw(!1)},_fnColCalc:function(){var e=this,t=0,n=0;this.s.aiInnerWidths=[],this.s.aiOuterWidths=[],r.each(this.s.dt.aoColumns,function(i,s){var o=r(s.nTh),u;if(!o.filter(":visible").length)e.s.aiInnerWidths.push(0),e.s.aiOuterWidths.push(0);else{var a=o.outerWidth();e.s.aiOuterWidths.length===0&&(u=r(e.s.dt.nTable).css("border-left-width"),a+=typeof u=="string"?1:parseInt(u,10)),e.s.aiOuterWidths.length===e.s.dt.aoColumns.length-1&&(u=r(e.s.dt.nTable).css("border-right-width"),a+=typeof u=="string"?1:parseInt(u,10)),e.s.aiOuterWidths.push(a),e.s.aiInnerWidths.push(o.width()),i<e.s.iLeftColumns&&(t+=a),e.s.iTableColumns-e.s.iRightColumns<=i&&(n+=a)}}),this.s.iLeftWidth=t,this.s.iRightWidth=n},_fnGridSetup:function(){var e=this,t=this._fnDTOverflow(),n;this.dom.body=this.s.dt.nTable,this.dom.header=this.s.dt.nTHead.parentNode,this.dom.header.parentNode.parentNode.style.position="relative";var i=r('<div class="DTFC_ScrollWrapper" style="position:relative; clear:both;"><div class="DTFC_LeftWrapper" style="position:absolute; top:0; left:0;"><div class="DTFC_LeftHeadWrapper" style="position:relative; top:0; left:0; overflow:hidden;"></div><div class="DTFC_LeftBodyWrapper" style="position:relative; top:0; left:0; overflow:hidden;"><div class="DTFC_LeftBodyLiner" style="position:relative; top:0; left:0; overflow-y:scroll;"></div></div><div class="DTFC_LeftFootWrapper" style="position:relative; top:0; left:0; overflow:hidden;"></div></div><div class="DTFC_RightWrapper" style="position:absolute; top:0; left:0;"><div class="DTFC_RightHeadWrapper" style="position:relative; top:0; left:0;"><div class="DTFC_RightHeadBlocker DTFC_Blocker" style="position:absolute; top:0; bottom:0;"></div></div><div class="DTFC_RightBodyWrapper" style="position:relative; top:0; left:0; overflow:hidden;"><div class="DTFC_RightBodyLiner" style="position:relative; top:0; left:0; overflow-y:scroll;"></div></div><div class="DTFC_RightFootWrapper" style="position:relative; top:0; left:0;"><div class="DTFC_RightFootBlocker DTFC_Blocker" style="position:absolute; top:0; bottom:0;"></div></div></div></div>')[0],s=i.childNodes[0],o=i.childNodes[1];this.dom.grid.dt.parentNode.insertBefore(i,this.dom.grid.dt),i.appendChild(this.dom.grid.dt),this.dom.grid.wrapper=i,this.s.iLeftColumns>0&&(this.dom.grid.left.wrapper=s,this.dom.grid.left.head=s.childNodes[0],this.dom.grid.left.body=s.childNodes[1],this.dom.grid.left.liner=r("div.DTFC_LeftBodyLiner",i)[0],i.appendChild(s)),this.s.iRightColumns>0&&(this.dom.grid.right.wrapper=o,this.dom.grid.right.head=o.childNodes[0],this.dom.grid.right.body=o.childNodes[1],this.dom.grid.right.liner=r("div.DTFC_RightBodyLiner",i)[0],n=r("div.DTFC_RightHeadBlocker",i)[0],n.style.width=t.bar+"px",n.style.right=-t.bar+"px",this.dom.grid.right.headBlock=n,n=r("div.DTFC_RightFootBlocker",i)[0],n.style.width=t.bar+"px",n.style.right=-t.bar+"px",this.dom.grid.right.footBlock=n,i.appendChild(o)),this.s.dt.nTFoot&&(this.dom.footer=this.s.dt.nTFoot.parentNode,this.s.iLeftColumns>0&&(this.dom.grid.left.foot=s.childNodes[2]),this.s.iRightColumns>0&&(this.dom.grid.right.foot=o.childNodes[2]))},_fnGridLayout:function(){var e=this.dom.grid,t=r(e.wrapper).width(),n=r(this.s.dt.nTable.parentNode).outerHeight(),i=r(this.s.dt.nTable.parentNode.parentNode).outerHeight(),s=this._fnDTOverflow(),o=this.s.iLeftWidth,u=this.s.iRightWidth,a,f=function(e,t){s.bar?e.style.width=t+s.bar+"px":(e.style.width=t+20+"px",e.style.paddingRight="20px",e.style.boxSizing="border-box")};s.x&&(n-=s.bar),e.wrapper.style.height=i+"px",this.s.iLeftColumns>0&&(e.left.wrapper.style.width=o+"px",e.left.wrapper.style.height="1px",e.left.body.style.height=n+"px",e.left.foot&&(e.left.foot.style.top=(s.x?s.bar:0)+"px"),f(e.left.liner,o),e.left.liner.style.height=n+"px"),this.s.iRightColumns>0&&(a=t-u,s.y&&(a-=s.bar),e.right.wrapper.style.width=u+"px",e.right.wrapper.style.left=a+"px",e.right.wrapper.style.height="1px",e.right.body.style.height=n+"px",e.right.foot&&(e.right.foot.style.top=(s.x?s.bar:0)+"px"),f(e.right.liner,u),e.right.liner.style.height=n+"px",e.right.headBlock.style.display=s.y?"block":"none",e.right.footBlock.style.display=s.y?"block":"none")},_fnDTOverflow:function(){var e=this.s.dt.nTable,t=e.parentNode,n={x:!1,y:!1,bar:this.s.dt.oScroll.iBarWidth};return e.offsetWidth>t.clientWidth&&(n.x=!0),e.offsetHeight>t.clientHeight&&(n.y=!0),n},_fnDraw:function(e){this._fnGridLayout(),this._fnCloneLeft(e),this._fnCloneRight(e),this.s.fnDrawCallback!==null&&this.s.fnDrawCallback.call(this,this.dom.clone.left,this.dom.clone.right),r(this).trigger("draw.dtfc",{leftClone:this.dom.clone.left,rightClone:this.dom.clone.right})},_fnCloneRight:function(e){if(this.s.iRightColumns<=0)return;var t=this,n,r,i=[];for(n=this.s.iTableColumns-this.s.iRightColumns;n<this.s.iTableColumns;n++)this.s.dt.aoColumns[n].bVisible&&i.push(n);this._fnClone(this.dom.clone.right,this.dom.grid.right,i,e)},_fnCloneLeft:function(e){if(this.s.iLeftColumns<=0)return;var t=this,n,r,i=[];for(n=0;n<this.s.iLeftColumns;n++)this.s.dt.aoColumns[n].bVisible&&i.push(n);this._fnClone(this.dom.clone.left,this.dom.grid.left,i,e)},_fnCopyLayout:function(e,t){var n=[],i=[],s=[];for(var o=0,u=e.length;o<u;o++){var a=[];a.nTr=r(e[o].nTr).clone(!0,!0)[0];for(var f=0,l=this.s.iTableColumns;f<l;f++){if(r.inArray(f,t)===-1)continue;var c=r.inArray(e[o][f].cell,s);if(c===-1){var h=r(e[o][f].cell).clone(!0,!0)[0];i.push(h),s.push(e[o][f].cell),a.push({cell:h,unique:e[o][f].unique})}else a.push({cell:i[c],unique:e[o][f].unique})}n.push(a)}return n},_fnClone:function(e,t,i,s){var o=this,u,a,f,l,c,h,p,d,v,m,g,y,b=this.s.dt;if(s){e.header!==null&&e.header.parentNode.removeChild(e.header),e.header=r(this.dom.header).clone(!0,!0)[0],e.header.className+=" DTFC_Cloned",e.header.style.width="100%",t.head.appendChild(e.header),m=this._fnCopyLayout(b.aoHeader,i),g=r(">thead",e.header),g.empty();for(u=0,a=m.length;u<a;u++)g[0].appendChild(m[u].nTr);b.oApi._fnDrawHead(b,m,!0)}else{m=this._fnCopyLayout(b.aoHeader,i),y=[],b.oApi._fnDetectHeader(y,r(">thead",e.header)[0]);for(u=0,a=m.length;u<a;u++)for(f=0,l=m[u].length;f<l;f++)y[u][f].cell.className=m[u][f].cell.className,r("span.DataTables_sort_icon",y[u][f].cell).each(function(){this.className=r("span.DataTables_sort_icon",m[u][f].cell)[0].className})}this._fnEqualiseHeights("thead",this.dom.header,e.header),this.s.sHeightMatch=="auto"&&r(">tbody>tr",o.dom.body).css("height","auto"),e.body!==null&&(e.body.parentNode.removeChild(e.body),e.body=null),e.body=r(this.dom.body).clone(!0)[0],e.body.className+=" DTFC_Cloned",e.body.style.paddingBottom=b.oScroll.iBarWidth+"px",e.body.style.marginBottom=b.oScroll.iBarWidth*2+"px",e.body.getAttribute("id")!==null&&e.body.removeAttribute("id"),r(">thead>tr",e.body).empty(),r(">tfoot",e.body).remove();var w=r("tbody",e.body)[0];r(w).empty();if(b.aiDisplay.length>0){var E=r(">thead>tr",e.body)[0];for(v=0;v<i.length;v++){p=i[v],d=r(b.aoColumns[p].nTh).clone(!0)[0],d.innerHTML="";var S=d.style;S.paddingTop="0",S.paddingBottom="0",S.borderTopWidth="0",S.borderBottomWidth="0",S.height=0,S.width=o.s.aiInnerWidths[p]+"px",E.appendChild(d)}r(">tbody>tr",o.dom.body).each(function(e){var t=this.cloneNode(!1);t.removeAttribute("id");var n=o.s.dt.oFeatures.bServerSide===!1?o.s.dt.aiDisplay[o.s.dt._iDisplayStart+e]:e,s=o.s.dt.aoData[n].anCells||r(this).children("td, th");for(v=0;v<i.length;v++)p=i[v],s.length>0&&(d=r(s[p]).clone(!0,!0)[0],t.appendChild(d));w.appendChild(t)})}else r(">tbody>tr",o.dom.body).each(function(e){d=this.cloneNode(!0),d.className+=" DTFC_NoData",r("td",d).html(""),w.appendChild(d)});e.body.style.width="100%",e.body.style.margin="0",e.body.style.padding="0";if(b.oScroller!==n){var x=b.oScroller.dom.force;t.forcer?t.forcer.style.height=x.style.height:(t.forcer=x.cloneNode(!0),t.liner.appendChild(t.forcer))}t.liner.appendChild(e.body),this._fnEqualiseHeights("tbody",o.dom.body,e.body);if(b.nTFoot!==null){if(s){e.footer!==null&&e.footer.parentNode.removeChild(e.footer),e.footer=r(this.dom.footer).clone(!0,!0)[0],e.footer.className+=" DTFC_Cloned",e.footer.style.width="100%",t.foot.appendChild(e.footer),m=this._fnCopyLayout(b.aoFooter,i);var T=r(">tfoot",e.footer);T.empty();for(u=0,a=m.length;u<a;u++)T[0].appendChild(m[u].nTr);b.oApi._fnDrawHead(b,m,!0)}else{m=this._fnCopyLayout(b.aoFooter,i);var N=[];b.oApi._fnDetectHeader(N,r(">tfoot",e.footer)[0]);for(u=0,a=m.length;u<a;u++)for(f=0,l=m[u].length;f<l;f++)N[u][f].cell.className=m[u][f].cell.className}this._fnEqualiseHeights("tfoot",this.dom.footer,e.footer)}var C=b.oApi._fnGetUniqueThs(b,r(">thead",e.header)[0]);r(C).each(function(e){p=i[e],this.style.width=o.s.aiInnerWidths[p]+"px"}),o.s.dt.nTFoot!==null&&(C=b.oApi._fnGetUniqueThs(b,r(">tfoot",e.footer)[0]),r(C).each(function(e){p=i[e],this.style.width=o.s.aiInnerWidths[p]+"px"}))},_fnGetTrNodes:function(e){var t=[];for(var n=0,r=e.childNodes.length;n<r;n++)e.childNodes[n].nodeName.toUpperCase()=="TR"&&t.push(e.childNodes[n]);return t},_fnEqualiseHeights:function(e,t,n){if(this.s.sHeightMatch=="none"&&e!=="thead"&&e!=="tfoot")return;var i=this,s,o,u,a,f,l,c=t.getElementsByTagName(e)[0],h=n.getElementsByTagName(e)[0],p=r(">"+e+">tr:eq(0)",t).children(":first"),d=p.outerHeight()-p.height(),v=this._fnGetTrNodes(c),m=this._fnGetTrNodes(h),g=[];for(s=0,o=m.length;s<o;s++)f=v[s].offsetHeight,l=m[s].offsetHeight,u=l>f?l:f,this.s.sHeightMatch=="semiauto"&&(v[s]._DTTC_iHeight=u),g.push(u);for(s=0,o=m.length;s<o;s++)m[s].style.height=g[s]+"px",v[s].style.height=g[s]+"px"}},s.defaults={iLeftColumns:1,iRightColumns:0,fnDrawCallback:null,sHeightMatch:"semiauto"},s.version="3.0.4",r.fn.dataTable.FixedColumns=s,r.fn.DataTable.FixedColumns=s,s};typeof define=="function"&&define.amd?define(["jquery","datatables"],r):typeof exports=="object"?r(require("jquery"),require("datatables")):jQuery&&!jQuery.fn.dataTable.FixedColumns&&r(jQuery,jQuery.fn.dataTable)})(window,document);