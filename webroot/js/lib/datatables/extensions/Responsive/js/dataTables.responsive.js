/*! Responsive 1.0.6
 * 2014-2015 SpryMedia Ltd - datatables.net/license
 */

/**
 * @summary     Responsive
 * @description Responsive tables plug-in for DataTables
 * @version     1.0.6
 * @file        dataTables.responsive.js
 * @author      SpryMedia Ltd (www.sprymedia.co.uk)
 * @contact     www.sprymedia.co.uk/contact
 * @copyright   Copyright 2014-2015 SpryMedia Ltd.
 *
 * This source file is free software, available under the following license:
 *   MIT license - http://datatables.net/license/mit
 *
 * This source file is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 * or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.
 *
 * For details please refer to: http://www.datatables.net
 */

(function(e,t,n){var r=function(n,r){"use strict";var i=function(e,t){if(!r.versionCheck||!r.versionCheck("1.10.1"))throw"DataTables Responsive requires DataTables 1.10.1 or newer";this.s={dt:new r.Api(e),columns:[]};if(this.s.dt.settings()[0].responsive)return;t&&typeof t.details=="string"&&(t.details={type:t.details}),this.c=n.extend(!0,{},i.defaults,r.defaults.responsive,t),e.responsive=this,this._constructor()};i.prototype={_constructor:function(){var t=this,r=this.s.dt;r.settings()[0]._responsive=this,n(e).on("resize.dtr orientationchange.dtr",r.settings()[0].oApi._fnThrottle(function(){t._resize()})),r.on("destroy.dtr",function(){n(e).off("resize.dtr orientationchange.dtr draw.dtr")}),this.c.breakpoints.sort(function(e,t){return e.width<t.width?1:e.width>t.width?-1:0}),this._classLogic(),this._resizeAuto();var i=this.c.details;i.type&&(t._detailsInit(),this._detailsVis(),r.on("column-visibility.dtr",function(){t._detailsVis()}),r.on("draw.dtr",function(){r.rows({page:"current"}).iterator("row",function(e,n){var i=r.row(n);if(i.child.isShown()){var s=t.c.details.renderer(r,n);i.child(s,"child").show()}})}),n(r.table().node()).addClass("dtr-"+i.type)),this._resize()},_columnsVisiblity:function(e){var t=this.s.dt,r=this.s.columns,i,s,o=n.map(r,function(t){return t.auto&&t.minWidth===null?!1:t.auto===!0?"-":n.inArray(e,t.includeIn)!==-1}),u=0;for(i=0,s=o.length;i<s;i++)o[i]===!0&&(u+=r[i].minWidth);var a=t.settings()[0].oScroll,f=a.sY||a.sX?a.iBarWidth:0,l=t.table().container().offsetWidth-f,c=l-u;for(i=0,s=o.length;i<s;i++)r[i].control&&(c-=r[i].minWidth);var h=!1;for(i=0,s=o.length;i<s;i++)o[i]==="-"&&!r[i].control&&(h||c-r[i].minWidth<0?(h=!0,o[i]=!1):o[i]=!0,c-=r[i].minWidth);var p=!1;for(i=0,s=r.length;i<s;i++)if(!r[i].control&&!r[i].never&&!o[i]){p=!0;break}for(i=0,s=r.length;i<s;i++)r[i].control&&(o[i]=p);return n.inArray(!0,o)===-1&&(o[0]=!0),o},_classLogic:function(){var e=this,t={},r=this.c.breakpoints,i=this.s.dt.columns().eq(0).map(function(e){var t=this.column(e).header().className;return{className:t,includeIn:[],auto:!1,control:!1,never:t.match(/\bnever\b/)?!0:!1}}),s=function(e,t){var r=i[e].includeIn;n.inArray(t,r)===-1&&r.push(t)},o=function(t,n,o,u){var a,f,l;if(!o)i[t].includeIn.push(n);else if(o==="max-"){a=e._find(n).width;for(f=0,l=r.length;f<l;f++)r[f].width<=a&&s(t,r[f].name)}else if(o==="min-"){a=e._find(n).width;for(f=0,l=r.length;f<l;f++)r[f].width>=a&&s(t,r[f].name)}else if(o==="not-")for(f=0,l=r.length;f<l;f++)r[f].name.indexOf(u)===-1&&s(t,r[f].name)};i.each(function(e,t){var i=e.className.split(" "),s=!1;for(var u=0,a=i.length;u<a;u++){var f=n.trim(i[u]);if(f==="all"){s=!0,e.includeIn=n.map(r,function(e){return e.name});return}if(f==="none"||f==="never"){s=!0;return}if(f==="control"){s=!0,e.control=!0;return}n.each(r,function(e,n){var r=n.name.split("-"),i=new RegExp("(min\\-|max\\-|not\\-)?("+r[0]+")(\\-[_a-zA-Z0-9])?"),u=f.match(i);u&&(s=!0,u[2]===r[0]&&u[3]==="-"+r[1]?o(t,n.name,u[1],u[2]+u[3]):u[2]===r[0]&&!u[3]&&o(t,n.name,u[1],u[2]))})}s||(e.auto=!0)}),this.s.columns=i},_detailsInit:function(){var e=this,t=this.s.dt,r=this.c.details;r.type==="inline"&&(r.target="td:first-child");var i=r.target,s=typeof i=="string"?i:"td";n(t.table().body()).on("click",s,function(r){if(!n(t.table().node()).hasClass("collapsed"))return;if(!t.row(n(this).closest("tr")).length)return;if(typeof i=="number"){var s=i<0?t.columns().eq(0).length+i:i;if(t.cell(this).index().column!==s)return}var o=t.row(n(this).closest("tr"));if(o.child.isShown())o.child(!1),n(o.node()).removeClass("parent");else{var u=e.c.details.renderer(t,o[0]);o.child(u,"child").show(),n(o.node()).addClass("parent")}})},_detailsVis:function(){var e=this,t=this.s.dt,r=t.columns().indexes().filter(function(e){var r=t.column(e);return r.visible()?null:n(r.header()).hasClass("never")?null:e}),i=!0;if(r.length===0||r.length===1&&this.s.columns[r[0]].control)i=!1;i?t.rows({page:"current"}).eq(0).each(function(n){var r=t.row(n);if(r.child()){var i=e.c.details.renderer(t,r[0]);i===!1?r.child.hide():r.child(i,"child").show()}}):t.rows({page:"current"}).eq(0).each(function(e){t.row(e).child.hide()})},_find:function(e){var t=this.c.breakpoints;for(var n=0,r=t.length;n<r;n++)if(t[n].name===e)return t[n]},_resize:function(){var t=this.s.dt,r=n(e).width(),i=this.c.breakpoints,s=i[0].name,o=this.s.columns,u,a;for(u=i.length-1;u>=0;u--)if(r<=i[u].width){s=i[u].name;break}var f=this._columnsVisiblity(s),l=!1;for(u=0,a=o.length;u<a;u++)if(f[u]===!1&&!o[u].never){l=!0;break}n(t.table().node()).toggleClass("collapsed",l),t.columns().eq(0).each(function(e,n){t.column(e).visible(f[n])})},_resizeAuto:function(){var e=this.s.dt,t=this.s.columns;if(!this.c.auto)return;if(n.inArray(!0,n.map(t,function(e){return e.auto}))===-1)return;var r=e.table().node().offsetWidth,i=e.columns,s=e.table().node().cloneNode(!1),o=n(e.table().header().cloneNode(!1)).appendTo(s),u=n(e.table().body().cloneNode(!1)).appendTo(s);n(e.table().footer()).clone(!1).appendTo(s),e.rows({page:"current"}).indexes().flatten().each(function(t){var r=e.row(t).node().cloneNode(!0);e.columns(":hidden").flatten().length&&n(r).append(e.cells(t,":hidden").nodes().to$().clone()),n(r).appendTo(u)});var a=e.columns().header().to$().clone(!1);n("<tr/>").append(a).appendTo(o),this.c.details.type==="inline"&&n(s).addClass("dtr-inline collapsed");var f=n("<div/>").css({width:1,height:1,overflow:"hidden"}).append(s);f.find("th.never, td.never").remove(),f.insertBefore(e.table().node()),e.columns().eq(0).each(function(e){t[e].minWidth=a[e].offsetWidth||0}),f.remove()}},i.breakpoints=[{name:"desktop",width:Infinity},{name:"tablet-l",width:1024},{name:"tablet-p",width:768},{name:"mobile-l",width:480},{name:"mobile-p",width:320}],i.defaults={breakpoints:i.breakpoints,auto:!0,details:{renderer:function(e,t){var r=e.cells(t,":hidden").eq(0).map(function(t){var r=n(e.column(t.column).header()),i=e.cell(t).index();if(r.hasClass("control")||r.hasClass("never"))return"";var s=e.settings()[0],o=s.oApi._fnGetCellData(s,i.row,i.column,"display"),u=r.text();return u&&(u+=":"),'<li data-dtr-index="'+i.column+'">'+'<span class="dtr-title">'+u+"</span> "+'<span class="dtr-data">'+o+"</span>"+"</li>"}).toArray().join("");return r?n('<ul data-dtr-index="'+t+'"/>').append(r):!1},target:0,type:"inline"}};var s=n.fn.dataTable.Api;return s.register("responsive()",function(){return this}),s.register("responsive.index()",function(e){return e=n(e),{column:e.data("dtr-index"),row:e.parent().data("dtr-index")}}),s.register("responsive.rebuild()",function(){return this.iterator("table",function(e){e._responsive&&e._responsive._classLogic()})}),s.register("responsive.recalc()",function(){return this.iterator("table",function(e){e._responsive&&(e._responsive._resizeAuto(),e._responsive._resize())})}),i.version="1.0.6",n.fn.dataTable.Responsive=i,n.fn.DataTable.Responsive=i,n(t).on("init.dt.dtr",function(e,t,s){if(e.namespace!=="dt")return;if(n(t.nTable).hasClass("responsive")||n(t.nTable).hasClass("dt-responsive")||t.oInit.responsive||r.defaults.responsive){var o=t.oInit.responsive;o!==!1&&new i(t,n.isPlainObject(o)?o:{})}}),i};typeof define=="function"&&define.amd?define(["jquery","datatables"],r):typeof exports=="object"?r(require("jquery"),require("datatables")):jQuery&&!jQuery.fn.dataTable.Responsive&&r(jQuery,jQuery.fn.dataTable)})(window,document);