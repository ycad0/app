/*! FixedHeader 2.1.2
 * Â©2010-2014 SpryMedia Ltd - datatables.net/license
 */

/**
 * @summary     FixedHeader
 * @description Fix a table's header or footer, so it is always visible while
 *              Scrolling
 * @version     2.1.2
 * @file        dataTables.fixedHeader.js
 * @author      SpryMedia Ltd (www.sprymedia.co.uk)
 * @contact     www.sprymedia.co.uk/contact
 * @copyright   Copyright 2009-2014 SpryMedia Ltd.
 *
 * This source file is free software, available under the following license:
 *   MIT license - http://datatables.net/license/mit
 *
 * This source file is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 * or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.
 *
 * For details please refer to: http://www.datatables.net
 */

var FixedHeader;(function(e,t,n){var r=function(r,i){"use strict";return FixedHeader=function(e,t){if(!this instanceof FixedHeader){alert("FixedHeader warning: FixedHeader must be initialised with the 'new' keyword.");return}var n=this,i={aoCache:[],oSides:{top:!0,bottom:!1,left:0,right:0},oZIndexes:{top:104,bottom:103,left:102,right:101},oCloneOnDraw:{top:!1,bottom:!1,left:!0,right:!0},oMes:{iTableWidth:0,iTableHeight:0,iTableLeft:0,iTableRight:0,iTableTop:0,iTableBottom:0},oOffset:{top:0},nTable:null,bFooter:!1,bInitComplete:!1};this.fnGetSettings=function(){return i},this.fnUpdate=function(){this._fnUpdateClones(),this._fnUpdatePositions()},this.fnPosition=function(){this._fnUpdatePositions()};var s=r.fn.dataTable.Api?(new r.fn.dataTable.Api(e)).settings()[0]:e.fnSettings();s._oPluginFixedHeader=this,this.fnInit(s,t)},FixedHeader.prototype={fnInit:function(t,n){var i=this.fnGetSettings(),s=this;this.fnInitSettings(i,n);if(t.oScroll.sX!==""||t.oScroll.sY!==""){alert("FixedHeader 2 is not supported with DataTables' scrolling mode at this time");return}i.nTable=t.nTable,t.aoDrawCallback.unshift({fn:function(){FixedHeader.fnMeasure(),s._fnUpdateClones.call(s),s._fnUpdatePositions.call(s)},sName:"FixedHeader"}),i.bFooter=r(">tfoot",i.nTable).length>0?!0:!1,i.oSides.top&&i.aoCache.push(s._fnCloneTable("fixedHeader","FixedHeader_Header",s._fnCloneThead)),i.oSides.bottom&&i.aoCache.push(s._fnCloneTable("fixedFooter","FixedHeader_Footer",s._fnCloneTfoot)),i.oSides.left&&i.aoCache.push(s._fnCloneTable("fixedLeft","FixedHeader_Left",s._fnCloneTLeft,i.oSides.left)),i.oSides.right&&i.aoCache.push(s._fnCloneTable("fixedRight","FixedHeader_Right",s._fnCloneTRight,i.oSides.right)),FixedHeader.afnScroll.push(function(){s._fnUpdatePositions.call(s)}),r(e).resize(function(){FixedHeader.fnMeasure(),s._fnUpdateClones.call(s),s._fnUpdatePositions.call(s)}),r(i.nTable).on("column-reorder.dt",function(){FixedHeader.fnMeasure(),s._fnUpdateClones(!0),s._fnUpdatePositions()}).on("column-visibility.dt",function(){FixedHeader.fnMeasure(),s._fnUpdateClones(!0),s._fnUpdatePositions()}),FixedHeader.fnMeasure(),s._fnUpdateClones(),s._fnUpdatePositions(),i.bInitComplete=!0},fnInitSettings:function(e,t){t!==n&&(t.top!==n&&(e.oSides.top=t.top),t.bottom!==n&&(e.oSides.bottom=t.bottom),typeof t.left=="boolean"?e.oSides.left=t.left?1:0:t.left!==n&&(e.oSides.left=t.left),typeof t.right=="boolean"?e.oSides.right=t.right?1:0:t.right!==n&&(e.oSides.right=t.right),t.zTop!==n&&(e.oZIndexes.top=t.zTop),t.zBottom!==n&&(e.oZIndexes.bottom=t.zBottom),t.zLeft!==n&&(e.oZIndexes.left=t.zLeft),t.zRight!==n&&(e.oZIndexes.right=t.zRight),t.offsetTop!==n&&(e.oOffset.top=t.offsetTop),t.alwaysCloneTop!==n&&(e.oCloneOnDraw.top=t.alwaysCloneTop),t.alwaysCloneBottom!==n&&(e.oCloneOnDraw.bottom=t.alwaysCloneBottom),t.alwaysCloneLeft!==n&&(e.oCloneOnDraw.left=t.alwaysCloneLeft),t.alwaysCloneRight!==n&&(e.oCloneOnDraw.right=t.alwaysCloneRight))},_fnCloneTable:function(e,n,i,s){var o=this.fnGetSettings(),u;r(o.nTable.parentNode).css("position")!="absolute"&&(o.nTable.parentNode.style.position="relative"),u=o.nTable.cloneNode(!1),u.removeAttribute("id");var a=t.createElement("div");return a.style.position="absolute",a.style.top="0px",a.style.left="0px",a.className+=" FixedHeader_Cloned "+e+" "+n,e=="fixedHeader"&&(a.style.zIndex=o.oZIndexes.top),e=="fixedFooter"&&(a.style.zIndex=o.oZIndexes.bottom),e=="fixedLeft"?a.style.zIndex=o.oZIndexes.left:e=="fixedRight"&&(a.style.zIndex=o.oZIndexes.right),u.style.margin="0",a.appendChild(u),t.body.appendChild(a),{nNode:u,nWrapper:a,sType:e,sPosition:"",sTop:"",sLeft:"",fnClone:i,iCells:s}},_fnMeasure:function(){var e=this.fnGetSettings(),t=e.oMes,n=r(e.nTable),i=n.offset(),s=this._fnSumScroll(e.nTable.parentNode,"scrollTop"),o=this._fnSumScroll(e.nTable.parentNode,"scrollLeft");t.iTableWidth=n.outerWidth(),t.iTableHeight=n.outerHeight(),t.iTableLeft=i.left+e.nTable.parentNode.scrollLeft,t.iTableTop=i.top+s,t.iTableRight=t.iTableLeft+t.iTableWidth,t.iTableRight=FixedHeader.oDoc.iWidth-t.iTableLeft-t.iTableWidth,t.iTableBottom=FixedHeader.oDoc.iHeight-t.iTableTop-t.iTableHeight},_fnSumScroll:function(e,t){var n=e[t];while(e=e.parentNode){if(e.nodeName=="HTML"||e.nodeName=="BODY")break;n=e[t]}return n},_fnUpdatePositions:function(){var e=this.fnGetSettings();this._fnMeasure();for(var t=0,n=e.aoCache.length;t<n;t++)e.aoCache[t].sType=="fixedHeader"?this._fnScrollFixedHeader(e.aoCache[t]):e.aoCache[t].sType=="fixedFooter"?this._fnScrollFixedFooter(e.aoCache[t]):e.aoCache[t].sType=="fixedLeft"?this._fnScrollHorizontalLeft(e.aoCache[t]):this._fnScrollHorizontalRight(e.aoCache[t])},_fnUpdateClones:function(e){var t=this.fnGetSettings();e&&(t.bInitComplete=!1);for(var n=0,r=t.aoCache.length;n<r;n++)t.aoCache[n].fnClone.call(this,t.aoCache[n]);e&&(t.bInitComplete=!0)},_fnScrollHorizontalRight:function(e){var t=this.fnGetSettings(),n=t.oMes,i=FixedHeader.oWin,s=FixedHeader.oDoc,o=e.nWrapper,u=r(o).outerWidth();i.iScrollRight<n.iTableRight?(this._fnUpdateCache(e,"sPosition","absolute","position",o.style),this._fnUpdateCache(e,"sTop",n.iTableTop+"px","top",o.style),this._fnUpdateCache(e,"sLeft",n.iTableLeft+n.iTableWidth-u+"px","left",o.style)):n.iTableLeft<s.iWidth-i.iScrollRight-u?(this._fnUpdateCache(e,"sPosition","fixed","position",o.style),this._fnUpdateCache(e,"sTop",n.iTableTop-i.iScrollTop+"px","top",o.style),this._fnUpdateCache(e,"sLeft",i.iWidth-u+"px","left",o.style)):(this._fnUpdateCache(e,"sPosition","absolute","position",o.style),this._fnUpdateCache(e,"sTop",n.iTableTop+"px","top",o.style),this._fnUpdateCache(e,"sLeft",n.iTableLeft+"px","left",o.style))},_fnScrollHorizontalLeft:function(e){var t=this.fnGetSettings(),n=t.oMes,i=FixedHeader.oWin,s=FixedHeader.oDoc,o=e.nWrapper,u=r(o).outerWidth();i.iScrollLeft<n.iTableLeft?(this._fnUpdateCache(e,"sPosition","absolute","position",o.style),this._fnUpdateCache(e,"sTop",n.iTableTop+"px","top",o.style),this._fnUpdateCache(e,"sLeft",n.iTableLeft+"px","left",o.style)):i.iScrollLeft<n.iTableLeft+n.iTableWidth-u?(this._fnUpdateCache(e,"sPosition","fixed","position",o.style),this._fnUpdateCache(e,"sTop",n.iTableTop-i.iScrollTop+"px","top",o.style),this._fnUpdateCache(e,"sLeft","0px","left",o.style)):(this._fnUpdateCache(e,"sPosition","absolute","position",o.style),this._fnUpdateCache(e,"sTop",n.iTableTop+"px","top",o.style),this._fnUpdateCache(e,"sLeft",n.iTableLeft+n.iTableWidth-u+"px","left",o.style))},_fnScrollFixedFooter:function(e){var t=this.fnGetSettings(),n=t.oMes,i=FixedHeader.oWin,s=FixedHeader.oDoc,o=e.nWrapper,u=r("thead",t.nTable).outerHeight(),a=r(o).outerHeight();i.iScrollBottom<n.iTableBottom?(this._fnUpdateCache(e,"sPosition","absolute","position",o.style),this._fnUpdateCache(e,"sTop",n.iTableTop+n.iTableHeight-a+"px","top",o.style),this._fnUpdateCache(e,"sLeft",n.iTableLeft+"px","left",o.style)):i.iScrollBottom<n.iTableBottom+n.iTableHeight-a-u?(this._fnUpdateCache(e,"sPosition","fixed","position",o.style),this._fnUpdateCache(e,"sTop",i.iHeight-a+"px","top",o.style),this._fnUpdateCache(e,"sLeft",n.iTableLeft-i.iScrollLeft+"px","left",o.style)):(this._fnUpdateCache(e,"sPosition","absolute","position",o.style),this._fnUpdateCache(e,"sTop",n.iTableTop+a+"px","top",o.style),this._fnUpdateCache(e,"sLeft",n.iTableLeft+"px","left",o.style))},_fnScrollFixedHeader:function(e){var t=this.fnGetSettings(),n=t.oMes,r=FixedHeader.oWin,i=FixedHeader.oDoc,s=e.nWrapper,o=0,u=t.nTable.getElementsByTagName("tbody");for(var a=0;a<u.length;++a)o+=u[a].offsetHeight;n.iTableTop>r.iScrollTop+t.oOffset.top?(this._fnUpdateCache(e,"sPosition","absolute","position",s.style),this._fnUpdateCache(e,"sTop",n.iTableTop+"px","top",s.style),this._fnUpdateCache(e,"sLeft",n.iTableLeft+"px","left",s.style)):r.iScrollTop+t.oOffset.top>n.iTableTop+o?(this._fnUpdateCache(e,"sPosition","absolute","position",s.style),this._fnUpdateCache(e,"sTop",n.iTableTop+o+"px","top",s.style),this._fnUpdateCache(e,"sLeft",n.iTableLeft+"px","left",s.style)):(this._fnUpdateCache(e,"sPosition","fixed","position",s.style),this._fnUpdateCache(e,"sTop",t.oOffset.top+"px","top",s.style),this._fnUpdateCache(e,"sLeft",n.iTableLeft-r.iScrollLeft+"px","left",s.style))},_fnUpdateCache:function(e,t,n,r,i){e[t]!=n&&(i[r]=n,e[t]=n)},_fnClassUpdate:function(e,t){var n=this;if(e.nodeName.toUpperCase()==="TR"||e.nodeName.toUpperCase()==="TH"||e.nodeName.toUpperCase()==="TD"||e.nodeName.toUpperCase()==="SPAN")t.className=e.className;r(e).children().each(function(i){n._fnClassUpdate(r(e).children()[i],r(t).children()[i])})},_fnCloneThead:function(e){var t=this.fnGetSettings(),n=e.nNode;if(t.bInitComplete&&!t.oCloneOnDraw.top){this._fnClassUpdate(r("thead",t.nTable)[0],r("thead",n)[0]);return}var i=r(t.nTable).outerWidth();e.nWrapper.style.width=i+"px",n.style.width=i+"px";while(n.childNodes.length>0)r("thead th",n).unbind("click"),n.removeChild(n.childNodes[0]);var s=r("thead",t.nTable).clone(!0)[0];n.appendChild(s);var o=[],u=[];r("thead>tr th",t.nTable).each(function(e){o.push(r(this).width())}),r("thead>tr td",t.nTable).each(function(e){u.push(r(this).width())}),r("thead>tr th",t.nTable).each(function(e){r("thead>tr th:eq("+e+")",n).width(o[e]),r(this).width(o[e])}),r("thead>tr td",t.nTable).each(function(e){r("thead>tr td:eq("+e+")",n).width(u[e]),r(this).width(u[e])}),r("th.sorting, th.sorting_desc, th.sorting_asc",n).bind("click",function(){this.blur()})},_fnCloneTfoot:function(e){var t=this.fnGetSettings(),n=e.nNode;e.nWrapper.style.width=r(t.nTable).outerWidth()+"px";while(n.childNodes.length>0)n.removeChild(n.childNodes[0]);var i=r("tfoot",t.nTable).clone(!0)[0];n.appendChild(i),r("tfoot:eq(0)>tr th",t.nTable).each(function(e){r("tfoot:eq(0)>tr th:eq("+e+")",n).width(r(this).width())}),r("tfoot:eq(0)>tr td",t.nTable).each(function(e){r("tfoot:eq(0)>tr td:eq("+e+")",n).width(r(this).width())})},_fnCloneTLeft:function(e){var t=this.fnGetSettings(),n=e.nNode,i=r("tbody",t.nTable)[0];while(n.childNodes.length>0)n.removeChild(n.childNodes[0]);n.appendChild(r("thead",t.nTable).clone(!0)[0]),n.appendChild(r("tbody",t.nTable).clone(!0)[0]),t.bFooter&&n.appendChild(r("tfoot",t.nTable).clone(!0)[0]);var s="gt("+(e.iCells-1)+")";r("thead tr",n).each(function(e){r("th:"+s,this).remove()}),r("tfoot tr",n).each(function(e){r("th:"+s,this).remove()}),r("tbody tr",n).each(function(e){r("td:"+s,this).remove()}),this.fnEqualiseHeights("thead",i.parentNode,n),this.fnEqualiseHeights("tbody",i.parentNode,n),this.fnEqualiseHeights("tfoot",i.parentNode,n);var o=0;for(var u=0;u<e.iCells;u++)o+=r("thead tr th:eq("+u+")",t.nTable).outerWidth();n.style.width=o+"px",e.nWrapper.style.width=o+"px"},_fnCloneTRight:function(e){var t=this.fnGetSettings(),n=r("tbody",t.nTable)[0],i=e.nNode,s=r("tbody tr:eq(0) td",t.nTable).length;while(i.childNodes.length>0)i.removeChild(i.childNodes[0]);i.appendChild(r("thead",t.nTable).clone(!0)[0]),i.appendChild(r("tbody",t.nTable).clone(!0)[0]),t.bFooter&&i.appendChild(r("tfoot",t.nTable).clone(!0)[0]),r("thead tr th:lt("+(s-e.iCells)+")",i).remove(),r("tfoot tr th:lt("+(s-e.iCells)+")",i).remove(),r("tbody tr",i).each(function(t){r("td:lt("+(s-e.iCells)+")",this).remove()}),this.fnEqualiseHeights("thead",n.parentNode,i),this.fnEqualiseHeights("tbody",n.parentNode,i),this.fnEqualiseHeights("tfoot",n.parentNode,i);var o=0;for(var u=0;u<e.iCells;u++)o+=r("thead tr th:eq("+(s-1-u)+")",t.nTable).outerWidth();i.style.width=o+"px",e.nWrapper.style.width=o+"px"},fnEqualiseHeights:function(e,t,n){var i=this,s=r(e+" tr",t),o;r(e+" tr",n).each(function(e){o=s.eq(e).css("height"),navigator.appName=="Microsoft Internet Explorer"&&(o=parseInt(o,10)+1),r(this).css("height",o),s.eq(e).css("height",o)})}},FixedHeader.oWin={iScrollTop:0,iScrollRight:0,iScrollBottom:0,iScrollLeft:0,iHeight:0,iWidth:0},FixedHeader.oDoc={iHeight:0,iWidth:0},FixedHeader.afnScroll=[],FixedHeader.fnMeasure=function(){var n=r(e),i=r(t),s=FixedHeader.oWin,o=FixedHeader.oDoc;o.iHeight=i.height(),o.iWidth=i.width(),s.iHeight=n.height(),s.iWidth=n.width(),s.iScrollTop=n.scrollTop(),s.iScrollLeft=n.scrollLeft(),s.iScrollRight=o.iWidth-s.iScrollLeft-s.iWidth,s.iScrollBottom=o.iHeight-s.iScrollTop-s.iHeight},FixedHeader.version="2.1.2",r(e).scroll(function(){FixedHeader.fnMeasure();for(var e=0,t=FixedHeader.afnScroll.length;e<t;e++)FixedHeader.afnScroll[e]()}),r.fn.dataTable.FixedHeader=FixedHeader,r.fn.DataTable.FixedHeader=FixedHeader,FixedHeader};typeof define=="function"&&define.amd?define(["jquery","datatables"],r):typeof exports=="object"?r(require("jquery"),require("datatables")):jQuery&&!jQuery.fn.dataTable.FixedHeader&&r(jQuery,jQuery.fn.dataTable)})(window,document);